(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{108:function(e,t,n){},15:function(e,t,n){e.exports={header:"app-header_header__1iHLW",content:"app-header_content__KCd-V",logo:"app-header_logo__zVEfY",button:"app-header_button__1tHq1",button_text:"app-header_button_text__QpOdy",button_active:"app-header_button_active__N4rAI"}},197:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(34),s=n.n(r),i=(n(108),n(6));function o(e,t,n){var c=(n=n||{}).expires;if("number"==typeof c&&c){var a=new Date;a.setTime(a.getTime()+1e3*c),c=n.expires=a}c&&c.toUTCString&&(n.expires=c.toUTCString());var r=e+"="+(t=encodeURIComponent(t));for(var s in n){r+="; "+s;var i=n[s];!0!==i&&(r+="="+i)}document.cookie=r}function l(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function d(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}var u="https://norma.nomoreparties.space/api/",j="SET_TAB",b="GET_INGREDIENTS_REQUEST",O="GET_INGREDIENTS_SUCCESS",p="GET_INGREDIENTS_ERROR",m="OPEN_MODAL",x="OPEN_MODAL_ORDER",h="CLOSE_MODAL",_="CLOSE_MODAL_ORDER",g="GET_ORDER_REQUEST",f="GET_ORDER_SUCCESS",v="GET_ORDER_ERROR",y="SET_ORDER",E="CLEAR_ORDER",N="ADD_INGREDIENT",S="DELETE_INGREDIENT",T="CHANGE_SORT",R=function(e){return{type:S,id:e}},C=function(){return{type:h}},I=function(e){return{type:j,tab:e}},k="REGISTER_REQUEST",w="REGISTER_SUCCESS",D="REGISTER_FAILED",U="REGISTER_REQUEST",F="REGISTER_SUCCESS",P="REGISTER_FAILED",A="UPDATE_TOKEN_REQUEST",L="UPDATE_TOKEN_SUCCESS",q="UPDATE_TOKEN_FAILED",G="LOGOUT_REQUEST",z="LOGOUT_SUCCESS",B="LOGOUT_FAILED",Q="USER_REQUEST",J="USER_SUCCESS",M="USER_FAILED",W="UPDATE_USER_REQUEST",V="UPDATE_USER_SUCCESS",Z="UPDATE_USER_FAILED",H="FORGOT_PASSWORD_REQUEST",X="FORGOT_PASSWORD_SUCCESS",Y="FORGOT_PASSWORD_FAILED",K="RESET_PASSWORD_REQUEST",$="RESET_PASSWORD_SUCCESS",ee="RESET_PASSWORD_FAILED";function te(){return function(e){e({type:A}),fetch(u+"auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(d).then((function(t){t.success&&(o("token",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),e({type:L}))})).catch((function(t){console.log(t),e({type:q})}))}}function ne(){return function(e){e({type:G}),fetch(u+"auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(d).then((function(t){t.success&&(localStorage.removeItem("refreshToken"),o("token","",{expires:-1}),e({type:z}))})).catch((function(t){console.log(t),e({type:B})}))}}function ce(){return function(e){e({type:Q}),fetch(u+"auth/user",{method:"GET",headers:{"Content-Type":"application/json",Authorization:l("token")}}).then(d).then((function(t){t.success&&e({type:J,user:t.user})})).catch((function(t){console.log(t),localStorage.getItem("refreshToken")?(e(te()),e(ce())):e({type:M})}))}}function ae(e,t){return function(n){n({type:W}),fetch(u+"auth/user",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:l("token")},body:JSON.stringify({email:e,name:t})}).then(d).then((function(e){console.log(e),e.success&&n({type:V,user:e.user})})).catch((function(c){console.log(c),localStorage.getItem("refreshToken")?(n(te()),n(ae(e,t))):n({type:Z})}))}}var re=n(10),se=n(5),ie=n.n(se),oe=n(13),le=n(21),de=n.n(le),ue=n(4),je=n(204),be=n(12),Oe=n(0),pe="\u0411\u0443\u043b\u043a\u0438",me="\u0421\u043e\u0443\u0441\u044b",xe="\u041d\u0430\u0447\u0438\u043d\u043a\u0438",he=function(e){var t=e.item,n=e.onClick,c=Object(je.a)({type:"ingredients",item:t}),r=Object(oe.a)(c,2)[1],s=Object(re.h)(),o=Object(i.c)((function(e){return e.burger.constructor})),l=null===o||void 0===o?void 0:o.filter((function(e){return e._id===t._id})).length;return Object(Oe.jsx)(a.a.Fragment,{children:Object(Oe.jsx)(be.b,{className:de.a.link,to:{pathname:"/ingredients/".concat(t._id),state:{background:s}},children:Object(Oe.jsxs)("div",{className:de.a.card,onClick:n,ref:r,children:[0!==l&&l&&Object(Oe.jsx)("div",{className:de.a.counter,children:Object(Oe.jsx)(ue.Counter,{count:l,size:"default"})}),Object(Oe.jsx)("img",{src:t.image_large,className:de.a.img,alt:t.name}),Object(Oe.jsx)("div",{className:de.a.map,children:Object(Oe.jsxs)("p",{className:"text text_type_digits-default",children:[t.price,Object(Oe.jsx)(ue.CurrencyIcon,{type:"primary"})]})}),Object(Oe.jsx)("p",{className:"text text_type_main-default",children:t.name})]})},t._id)})},_e=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.burger.tab})),n=Object(i.c)((function(e){return e.burger.ingredients}));function c(t){var n;console.log(t),e(I(t)),null===(n=document.getElementById(t+"-list"))||void 0===n||n.scrollIntoView({behavior:"smooth",block:"start"})}var a=function(t){e(function(e){return{type:m,item:e}}(t))};return Object(Oe.jsxs)("div",{className:de.a.ingredient,children:[Object(Oe.jsx)("div",{className:de.a.burger,children:Object(Oe.jsx)("p",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"})}),Object(Oe.jsxs)("div",{className:de.a.tab,children:[Object(Oe.jsx)(ue.Tab,{value:"one",active:"one"===t,onClick:c,children:pe}),Object(Oe.jsx)(ue.Tab,{value:"two",active:"two"===t,onClick:c,children:me}),Object(Oe.jsx)(ue.Tab,{value:"three",active:"three"===t,onClick:c,children:xe})]}),Object(Oe.jsx)("div",{className:de.a.main,id:"ingredients-list",onScroll:function(){var n,c=(null===(n=document.getElementById("ingredients-list"))||void 0===n?void 0:n.scrollTop)||0,a="",r=1e6,s=0;["one","two","three"].forEach((function(e){var t,n,i=(null===(t=document.getElementById(e+"-list"))||void 0===t?void 0:t.offsetTop)||0,o=(null===(n=document.getElementById("ingredients-list"))||void 0===n?void 0:n.offsetTop)||0;(s=Math.abs(i-o-c))<r&&(a=e,r=s)})),a!==t&&e(I(a))},children:Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)("p",{className:"text text_type_main-medium",id:"one-list",children:pe}),Object(Oe.jsx)("div",{className:de.a.map,children:null===n||void 0===n?void 0:n.map((function(e){return"bun"===e.type&&Object(Oe.jsx)(he,{item:e,onClick:function(){a(e)}},e._id)}))}),Object(Oe.jsx)("p",{className:"text text_type_main-medium",id:"two-list",children:me}),Object(Oe.jsx)("div",{className:de.a.map,children:null===n||void 0===n?void 0:n.map((function(e){return"sauce"===e.type&&Object(Oe.jsx)(he,{item:e,onClick:function(){a(e)}},e._id)}))}),Object(Oe.jsx)("p",{className:"text text_type_main-medium",id:"three-list",children:xe}),Object(Oe.jsx)("div",{className:de.a.map,children:null===n||void 0===n?void 0:n.map((function(e){return"main"===e.type&&Object(Oe.jsx)(he,{item:e,onClick:function(){a(e)}},e._id)}))})]})})]})},ge=n(2),fe=n(206),ve=n(31),ye=n.n(ve),Ee=n(35),Ne=n.n(Ee),Se=function(e){var t=e.children,n=e.onClick;return Object(Oe.jsx)("div",{onClick:n,className:Ne.a.modaloverlay,children:t})},Te=document.getElementById("modals")||document.body,Re=function(e){var t=e.onClose,n=e.isOpen,a=e.children;return Object(c.useEffect)((function(){var e=function(e){"Escape"===e.key&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t]),n?s.a.createPortal(Object(Oe.jsxs)(Oe.Fragment,{children:[Object(Oe.jsx)(Se,{onClick:t}),Object(Oe.jsxs)("div",{className:Ne.a.modal,children:[Object(Oe.jsx)("div",{className:Ne.a.header,children:Object(Oe.jsx)("div",{className:Ne.a.button,children:Object(Oe.jsx)(ue.Button,{type:"secondary",size:"small",onClick:t,children:Object(Oe.jsx)(ue.CloseIcon,{type:"primary"})})})}),a]})]}),Te):null},Ce=n.p+"static/media/done.fd977731.svg",Ie=n(73),ke=n.n(Ie);function we(){var e=Object(i.c)((function(e){return e.burger.order}));return Object(Oe.jsxs)("div",{className:ke.a.component,children:[Object(Oe.jsx)("p",{className:"text text_type_main-large",children:e.name}),Object(Oe.jsx)("p",{className:"text text_type_digits-large",children:e.order.number}),Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(Oe.jsx)("img",{src:Ce,alt:"done",className:ke.a.img}),Object(Oe.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c "}),Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})}var De=n(205),Ue=function(e){var t=e.item,n=e.index,c=a.a.useRef(null),r=Object(i.b)(),s=Object(je.a)({type:"ingredient",item:{index:n}}),o=Object(oe.a)(s,2)[1],l=Object(De.a)({accept:"ingredient",hover:function(e){if(c.current){var t=e.index,a=n;t!==a&&(r(function(e,t){return{type:T,drag:e,hover:t}}(t,a)),e.index=a)}}});return o((0,Object(oe.a)(l,2)[1])(c)),Object(Oe.jsxs)("div",{className:ye.a.element,ref:c,children:[Object(Oe.jsx)(ue.DragIcon,{type:"primary"}),Object(Oe.jsx)(ue.ConstructorElement,{text:null===t||void 0===t?void 0:t.name,price:null===t||void 0===t?void 0:t.price,thumbnail:null===t||void 0===t?void 0:t.image,handleClose:function(){r(R(null===t||void 0===t?void 0:t.uuid))}})]})},Fe=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){var t;return null!==(t=e.burger.constructor)&&void 0!==t?t:[]})),n=t.find((function(e){return"bun"===(null===e||void 0===e?void 0:e.type)})),c=t.filter((function(e){return(null===e||void 0===e?void 0:e.type)&&"bun"!==(null===e||void 0===e?void 0:e.type)})),r=Object(i.c)((function(e){return e.burger.modalOrder})),s=Object(re.g)(),o=Object(i.c)((function(e){return e.auth.loggedIn})),l=a.a.useMemo((function(){return t?t.filter((function(e){return null===e||void 0===e?void 0:e.price})).reduce((function(e,t){return e+t.price}),0):0}),[t]),j=Object(De.a)({accept:"ingredients",drop:function(t){var c;n&&"bun"===t.type&&e(R(null===n||void 0===n?void 0:n.uuid)),e((c=Object(ge.a)(Object(ge.a)({},t),{},{uuid:Object(fe.a)()}),{type:N,item:c}))},collect:function(e){return{isDrop:e.isOver()}}}),b=Object(oe.a)(j,2),O=b[0].isDrop,p=b[1],m="".concat(ye.a.container," ").concat(O&&ye.a.drop);return Object(Oe.jsxs)(a.a.Fragment,{children:[Object(Oe.jsxs)(Re,{isOpen:r,onClose:function(){e({type:_}),e({type:E})},children:[" ",Object(Oe.jsx)(we,{})]}),Object(Oe.jsxs)("div",{className:m,ref:p,children:[n?Object(Oe.jsx)(ue.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(n.name," (\u0432\u0435\u0440\u0445)"),price:n.price,thumbnail:n.image}):Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:"\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0431\u0443\u0440\u0433\u0435\u0440\u0430"}),Object(Oe.jsx)("div",{className:ye.a.main,children:c&&(null===c||void 0===c?void 0:c.map((function(e,t){return Object(Oe.jsx)(Ue,{item:e,index:t},null===e||void 0===e?void 0:e.uuid)})))}),n&&Object(Oe.jsx)(ue.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(n.name," (\u043d\u0438\u0437)"),price:n.price,thumbnail:n.image}),Object(Oe.jsxs)("div",{className:ye.a.cost,children:[Object(Oe.jsx)("div",{className:ye.a.price,children:Object(Oe.jsxs)("p",{className:"text text_type_digits-medium",children:[l,Object(Oe.jsx)(ue.CurrencyIcon,{type:"primary"})]})}),Object(Oe.jsx)(ue.Button,{type:"primary",size:"large",onClick:function(){if(o){var n=t.map((function(e){return e._id}));e(function(e){return function(t){try{t({type:g}),fetch(u+"orders",{method:"POST",mode:"cors",body:JSON.stringify({ingredients:e}),headers:{"Content-Type":"application/json"}}).then(d).then((function(e){t({type:f,data:e})}))}catch(n){t({type:v,error:n})}}}(n)),setTimeout((function(){e({type:x})}),1e3)}else s.push("/login")},disabled:0===l,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})]})},Pe=n(102),Ae=n(203);var Le=function(){return Object(Oe.jsx)("div",{className:ie.a.App,children:Object(Oe.jsx)("main",{className:ie.a.page_content,children:Object(Oe.jsxs)(Ae.a,{backend:Pe.a,children:[Object(Oe.jsx)(_e,{}),Object(Oe.jsx)(Fe,{})]})})})},qe=n(23);function Ge(){var e,t=Object(re.g)(),n=Object(re.h)(),a=Object(c.useRef)(null),r=Object(c.useState)({email:"",password:""}),s=Object(oe.a)(r,2),l=s[0],j=s[1],b=Object(i.b)(),O=function(e){j(Object(ge.a)(Object(ge.a)({},l),{},Object(qe.a)({},e.target.name,e.target.value)))};return Object(i.c)((function(e){return e.auth.loggedIn}))?Object(Oe.jsx)(re.a,{to:(null===(e=n.state)||void 0===e?void 0:e.from)||"/"}):Object(Oe.jsxs)("div",{className:ie.a.App,children:[Object(Oe.jsxs)("div",{className:ie.a.inputs,children:[Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"})}),Object(Oe.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),b((t=l.email,n=l.password,function(e){e({type:U}),fetch(u+"auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then(d).then((function(t){t.success?(o("token",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),e({type:F,user:t.user})):e({type:P})})).catch((function(t){console.log(t),e({type:P})}))}))},children:[Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.Input,{type:"text",placeholder:"E-mail",onChange:O,value:l.email,name:"email",error:!1,ref:a,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.Input,{type:"text",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:O,value:l.password,name:"password",error:!1,ref:a,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(Oe.jsx)(ue.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}),Object(Oe.jsxs)("div",{className:ie.a.save,children:[Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(Oe.jsx)(ue.Button,{type:"secondary",size:"medium",onClick:function(){t.replace({pathname:"/register"})},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(Oe.jsxs)("div",{className:ie.a.save,children:[Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(Oe.jsx)(ue.Button,{type:"secondary",size:"medium",onClick:function(){t.replace({pathname:"/forgot-password"})},children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})}function ze(){var e=Object(c.useRef)(null),t=Object(i.b)(),n=Object(i.c)((function(e){return e.auth.user})),a=Object(i.c)((function(e){return e.auth.loggedIn})),r=Object(c.useState)(Object(ge.a)(Object(ge.a)({},n),{},{password:""})),s=Object(oe.a)(r,2),o=s[0],l=s[1],d=Object(c.useState)(!0),u=Object(oe.a)(d,2),j=u[0],b=u[1],O=function(e){l(Object(ge.a)(Object(ge.a)({},o),{},Object(qe.a)({},e.target.name,e.target.value))),b(!1)};return Object(Oe.jsx)("div",{className:ie.a.App,children:Object(Oe.jsxs)("main",{className:ie.a.page_content,children:[Object(Oe.jsxs)("div",{className:ie.a.buttons,children:[Object(Oe.jsx)(ue.Button,{type:"secondary",size:"large",children:Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(Oe.jsx)(ue.Button,{type:"secondary",size:"large",disabled:!0,children:Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(Oe.jsx)(ue.Button,{type:"secondary",size:"large",onClick:function(){if(t(ne()),!a)return Object(Oe.jsx)(re.a,{to:"/login"})},children:Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(Oe.jsx)("div",{className:ie.a.text,children:Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})})]}),Object(Oe.jsxs)("form",{className:ie.a.buttons,onSubmit:function(e){e.preventDefault(),t(ae(o.email,o.name))},children:[Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.Input,{type:"text",placeholder:"\u0418\u043c\u044f",icon:"EditIcon",onChange:O,value:o.name,name:"name",error:!1,ref:e})}),Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:O,icon:"EditIcon",value:o.email,name:"email",error:!1,ref:e,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.Input,{type:"text",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:O,icon:"EditIcon",value:o.password,name:"password",error:!1,ref:e,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(Oe.jsxs)("div",{className:ie.a.save,children:[Object(Oe.jsx)(ue.Button,{type:"secondary",onClick:function(){l(Object(ge.a)({},n)),b(!0)},disabled:j,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(Oe.jsx)(ue.Button,{disabled:j,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})})}function Be(){var e=Object(re.g)(),t=Object(c.useRef)(null),n=Object(c.useState)({email:"",password:"",name:""}),a=Object(oe.a)(n,2),r=a[0],s=a[1],l=Object(i.b)(),j=function(e){s(Object(ge.a)(Object(ge.a)({},r),{},Object(qe.a)({},e.target.name,e.target.value)))};return Object(i.c)((function(e){return e.auth.loggedIn}))?Object(Oe.jsx)(re.a,{to:"/"}):Object(Oe.jsxs)("div",{className:ie.a.App,children:[Object(Oe.jsxs)("div",{className:ie.a.inputs,children:[Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(Oe.jsxs)("form",{onSubmit:function(e){var t,n,c;e.preventDefault(),l((t=r.email,n=r.password,c=r.name,function(e){e({type:k}),fetch(u+"auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,name:c})}).then(d).then((function(t){t.success?(o("token",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),e({type:w,user:t.user})):e({type:D})})).catch((function(t){console.log(t),e({type:D})}))}))},children:[Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:j,value:r.name,name:"name",error:!1,ref:t,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.Input,{type:"text",placeholder:"E-mail",onChange:j,value:r.email,name:"email",error:!1,ref:t,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.PasswordInput,{onChange:j,value:r.password,name:"password"})}),Object(Oe.jsx)(ue.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]}),Object(Oe.jsxs)("div",{className:ie.a.save,children:[Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(Oe.jsx)(ue.Button,{type:"secondary",size:"medium",onClick:function(){e.replace({pathname:"/login"})},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}function Qe(){var e=Object(i.b)(),t=Object(re.g)(),n=Object(i.c)((function(e){return e.auth.loggedIn})),c=a.a.useState({email:""}),r=Object(oe.a)(c,2),s=r[0],o=r[1];if(n)return Object(Oe.jsx)(re.a,{to:"/"});return Object(Oe.jsxs)("div",{className:ie.a.App,children:[Object(Oe.jsxs)("div",{className:ie.a.inputs,children:[Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"})}),Object(Oe.jsxs)("form",{onSubmit:function(n){var c;n.preventDefault(),e((c=s.email,function(e){e({type:H}),fetch(u+"password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c})}).then(d).then((function(t){t.success&&e({type:X})})).catch((function(t){console.log(t),e({type:Y})}))})),t.push({pathname:"/reset-password",state:{prevPathname:t.location.pathname}})},children:[Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.Input,{type:"text",placeholder:"E-mail",onChange:function(e){o(Object(ge.a)(Object(ge.a)({},s),{},Object(qe.a)({},e.target.name,e.target.value)))},value:s.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(Oe.jsx)(ue.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]})]}),Object(Oe.jsxs)("div",{className:ie.a.save,children:[Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(Oe.jsx)(ue.Button,{type:"secondary",size:"medium",onClick:function(){t.replace({pathname:"/login"})},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}function Je(){var e=Object(i.c)((function(e){return e.auth})),t=Object(i.b)(),n=Object(re.g)(),a=n.location.state,r=Object(c.useState)({password:"",token:""}),s=Object(oe.a)(r,2),o=s[0],l=s[1],j=function(e){l(Object(ge.a)(Object(ge.a)({},o),{},Object(qe.a)({},e.target.name,e.target.value)))};return a?null!==e&&void 0!==e&&e.loggedIn?Object(Oe.jsx)(re.a,{to:"/"}):Object(Oe.jsxs)("div",{className:ie.a.App,children:[Object(Oe.jsxs)("div",{className:ie.a.inputs,children:[Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"})}),Object(Oe.jsxs)("form",{onSubmit:function(c){var a,r;c.preventDefault(),t((a=o.password,r=o.token,function(e){e({type:K}),fetch(u+"password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:a,token:r})}).then(d).then((function(t){t.success&&e({type:$})})).catch((function(t){console.log(t),e({type:ee})}))})),null!==e&&void 0!==e&&e.loggedIn.resetPasswordFailed?alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c:("):n.push("/login")},children:[Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.PasswordInput,{onChange:j,value:o.password,name:"password"})}),Object(Oe.jsx)("div",{className:ie.a.input,children:Object(Oe.jsx)(ue.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:j,value:o.token,name:"token",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default"})}),Object(Oe.jsx)(ue.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]}),Object(Oe.jsxs)("div",{className:ie.a.save,children:[Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(Oe.jsx)(ue.Button,{type:"secondary",size:"medium",onClick:function(){n.replace({pathname:"/login"})},children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(Oe.jsx)(re.a,{to:"/login"})}var Me=function(){var e=Object(re.i)().id,t=Object(i.c)((function(e){return e.burger.ingredients})),n=null===t||void 0===t?void 0:t.find((function(t){return t._id===e}));return Object(Oe.jsxs)("div",{className:ie.a.component,children:[Object(Oe.jsx)("p",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(Oe.jsx)("img",{src:null===n||void 0===n?void 0:n.image_large,alt:"image_large"}),Object(Oe.jsx)("p",{className:"text text_type_main-medium",children:null===n||void 0===n?void 0:n.name}),Object(Oe.jsxs)("div",{className:ie.a.ingredient,children:[Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:null===n||void 0===n?void 0:n.calories})]}),Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:null===n||void 0===n?void 0:n.proteins})]}),Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:null===n||void 0===n?void 0:n.fat})]}),Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(Oe.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:null===n||void 0===n?void 0:n.carbohydrates})]})]})]})},We=n(100),Ve=["children"],Ze=function(e){var t=e.children,n=Object(We.a)(e,Ve),c=Object(i.c)((function(e){return e.auth.loggedIn}));return Object(Oe.jsx)(re.b,Object(ge.a)(Object(ge.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(Oe.jsx)(re.a,{to:{pathname:"/login",state:{from:n}}})}}))},He=n(15),Xe=n.n(He),Ye=function(){var e=Object(re.j)("/"),t=Object(re.j)("/list"),n=Object(re.j)("/profile");return Object(Oe.jsx)("header",{className:Xe.a.header,children:Object(Oe.jsxs)("div",{className:Xe.a.content,children:[Object(Oe.jsx)(be.c,{exact:!0,to:"/",className:Xe.a.button,activeClassName:Xe.a.button_active,children:Object(Oe.jsxs)("div",{className:Xe.a.content,children:[Object(Oe.jsx)(ue.BurgerIcon,{type:null!==e&&void 0!==e&&e.isExact?"primary":"secondary"}),Object(Oe.jsx)("p",{className:Xe.a.button_text,children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(Oe.jsx)(be.c,{exact:!0,to:"/list",className:Xe.a.button,activeClassName:Xe.a.button_active,children:Object(Oe.jsxs)("div",{className:Xe.a.content,children:[Object(Oe.jsx)(ue.ListIcon,{type:t?"primary":"secondary"}),Object(Oe.jsx)("p",{className:Xe.a.button_text,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})}),Object(Oe.jsx)("div",{className:Xe.a.logo,children:Object(Oe.jsx)(ue.Logo,{})}),Object(Oe.jsx)(be.c,{exact:!0,to:"/profile",className:Xe.a.button,activeClassName:Xe.a.button_active,children:Object(Oe.jsxs)("div",{className:Xe.a.content,children:[Object(Oe.jsx)(ue.ProfileIcon,{type:n?"primary":"secondary"}),Object(Oe.jsx)("p",{className:Xe.a.button_text,children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},Ke=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.burger.modal})),n=Object(re.g)(),a=Object(re.h)(),r=a.state&&a.state.background;Object(c.useEffect)((function(){e((function(e){try{e({type:b}),fetch(u+"ingredients").then(d).then((function(t){e({type:O,data:t.data})}))}catch(t){e({type:p,error:t})}})),localStorage.refreshToken&&e(ce()),n.replace()}),[e]);return Object(Oe.jsxs)("div",{children:[Object(Oe.jsx)(Ye,{}),Object(Oe.jsxs)(re.d,{location:r||a,children:[Object(Oe.jsx)(re.b,{path:"/",exact:!0,children:Object(Oe.jsx)(Le,{})}),Object(Oe.jsx)(Ze,{path:"/profile",children:Object(Oe.jsx)(ze,{})}),Object(Oe.jsx)(re.b,{path:"/login",exact:!0,children:Object(Oe.jsx)(Ge,{})}),Object(Oe.jsx)(re.b,{path:"/register",exact:!0,children:Object(Oe.jsx)(Be,{})}),Object(Oe.jsx)(re.b,{path:"/forgot-password",exact:!0,children:Object(Oe.jsx)(Qe,{})}),Object(Oe.jsx)(re.b,{path:"/reset-password",exact:!0,children:Object(Oe.jsx)(Je,{})}),Object(Oe.jsx)(re.b,{path:"/ingredients/:id",children:Object(Oe.jsx)(Me,{})})]}),t&&r&&Object(Oe.jsx)(re.b,{path:"/ingredients/:id",exact:!0,children:Object(Oe.jsxs)(Re,{isOpen:t,onClose:function(){e(C),n.goBack()},children:[" ",Object(Oe.jsx)(Me,{})]})})]})},$e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,207)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},et=n(26),tt=n(101),nt=n(32),ct={tab:"one",ingredients:[],ingredientsLoading:!1,ingredientsError:null,constructor:[],modal:!1,modalOrder:!1,order:{},orderLoading:!1,orderError:null},at={user:null,registerRequest:!1,registerFailed:!1,loggedIn:!1,loginRequest:!1,loginFailed:!1,updateTokenRequest:!1,updateTokenFailed:!1,logoutRequest:!1,logoutFailed:!1,userRequest:!1,userFailed:!1,updateUserRequest:!1,updateUserFailed:!1,forgotPasswordRequest:!1,forgotPasswordFailed:!1,resetPasswordRequest:!1,resetPasswordFailed:!1},rt=Object(et.b)({burger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(ge.a)(Object(ge.a)({},e),{},{ingredientsLoading:!0,ingredientsError:null});case O:return Object(ge.a)(Object(ge.a)({},e),{},{ingredientsLoading:!1,ingredientsError:null,ingredients:t.data});case p:return Object(ge.a)(Object(ge.a)({},e),{},{ingredientsLoading:!1,ingredientsError:t.error});case g:return Object(ge.a)(Object(ge.a)({},e),{},{orderLoading:!0,orderError:null,order:{}});case f:return Object(ge.a)(Object(ge.a)({},e),{},{orderLoading:!1,orderError:null,order:t.data});case v:return Object(ge.a)(Object(ge.a)({},e),{},{orderLoading:!1,orderError:t.error});case N:return Object(ge.a)(Object(ge.a)({},e),{},{constructor:e.constructor?"bun"===t.item.type?[].concat(Object(nt.a)(e.constructor),[t.item,t.item]):[].concat(Object(nt.a)(e.constructor),[t.item]):"bun"===t.item.type?[t.item,t.item]:[t.item]});case S:return Object(ge.a)(Object(ge.a)({},e),{},{constructor:Object(nt.a)(e.constructor).filter((function(e){return e.uuid!==t.id}))});case m:return Object(ge.a)(Object(ge.a)({},e),{},{modal:!0});case x:return Object(ge.a)(Object(ge.a)({},e),{},{modalOrder:!0});case h:return Object(ge.a)(Object(ge.a)({},e),{},{modal:!1});case _:return Object(ge.a)(Object(ge.a)({},e),{},{modalOrder:!1});case j:return Object(ge.a)(Object(ge.a)({},e),{},{tab:t.tab});case y:return Object(ge.a)(Object(ge.a)({},e),{},{order:t.data});case E:return Object(ge.a)(Object(ge.a)({},e),{},{order:{},constructor:[]});case T:var n=e.constructor.filter((function(e){return"bun"!==e.type})),c=e.constructor.filter((function(e){return"bun"===e.type})),a=Object(nt.a)(n),r=a.splice(t.drag,1)[0];return a.splice(t.hover,0,r),Object(ge.a)(Object(ge.a)({},e),{},{constructor:[].concat(Object(nt.a)(c),Object(nt.a)(a))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(ge.a)(Object(ge.a)({},e),{},{registerRequest:!0,registerFailed:!1});case w:return Object(ge.a)(Object(ge.a)({},e),{},{user:t.user,registerRequest:!1,loggedIn:!0});case D:return Object(ge.a)(Object(ge.a)({},e),{},{registerFailed:!0,registerRequest:!1});case U:return Object(ge.a)(Object(ge.a)({},e),{},{loginRequest:!0,loginFailed:!1});case F:return Object(ge.a)(Object(ge.a)({},e),{},{user:t.user,loginRequest:!1,loggedIn:!0});case P:return Object(ge.a)(Object(ge.a)({},e),{},{loginFailed:!0,loginRequest:!1});case A:return Object(ge.a)(Object(ge.a)({},e),{},{updateTokenRequest:!0,updateTokenFailed:!1});case L:return Object(ge.a)(Object(ge.a)({},e),{},{loggedIn:!0,updateTokenRequest:!1});case q:return Object(ge.a)(Object(ge.a)({},e),{},{updateTokenFailed:!0,updateTokenRequest:!1});case G:return Object(ge.a)(Object(ge.a)({},e),{},{logoutRequest:!0,logoutFailed:!1});case z:return Object(ge.a)(Object(ge.a)({},e),{},{loggedIn:!1,user:null});case B:return Object(ge.a)(Object(ge.a)({},e),{},{logoutFailed:!0,logoutRequest:!1});case Q:return Object(ge.a)(Object(ge.a)({},e),{},{userRequest:!0,userFailed:!1});case J:return Object(ge.a)(Object(ge.a)({},e),{},{user:t.user,loggedIn:!0,userRequest:!1});case M:return Object(ge.a)(Object(ge.a)({},e),{},{userFailed:!0,userRequest:!1});case W:return Object(ge.a)(Object(ge.a)({},e),{},{updateUserRequest:!0,updateUserFailed:!1});case V:return Object(ge.a)(Object(ge.a)({},e),{},{user:t.user,updateUserRequest:!1});case Z:return Object(ge.a)(Object(ge.a)({},e),{},{updateUserFailed:!0,updateUserRequest:!1});case H:return Object(ge.a)(Object(ge.a)({},e),{},{forgotPasswordRequest:!0,forgotPasswordFailed:!1});case X:return Object(ge.a)(Object(ge.a)({},e),{},{user:t.user,forgotPasswordRequest:!1});case Y:return Object(ge.a)(Object(ge.a)({},e),{},{forgotPasswordFailed:!0,forgotPasswordRequest:!1});case K:return Object(ge.a)(Object(ge.a)({},e),{},{resetPasswordRequest:!0,resetPasswordFailed:!1});case $:return Object(ge.a)(Object(ge.a)({},e),{},{user:t.user,resetPasswordRequest:!1});case ee:return Object(ge.a)(Object(ge.a)({},e),{},{resetPasswordFailed:!0,resetPasswordRequest:!1});default:return e}}}),st=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):et.c)(Object(et.a)(tt.a)),it=Object(et.d)(rt,st);s.a.render(Object(Oe.jsx)(a.a.StrictMode,{children:Object(Oe.jsx)(i.a,{store:it,children:Object(Oe.jsx)(be.a,{children:Object(Oe.jsx)(Ke,{})})})}),document.getElementById("root")),$e()},21:function(e,t,n){e.exports={ingredient:"burger-ingredients_ingredient__1E_jZ",tab:"burger-ingredients_tab__1Ru1Z",main:"burger-ingredients_main__1liZB",map:"burger-ingredients_map__3yu6H",img:"burger-ingredients_img__GZGnF",card:"burger-ingredients_card__61Bte",counter:"burger-ingredients_counter__1RQZz",burger:"burger-ingredients_burger__19AlY",p:"burger-ingredients_p__uhNIW",link:"burger-ingredients_link__2-zFo"}},31:function(e,t,n){e.exports={constructor:"burger-constructor_constructor__2Wifa",locked:"burger-constructor_locked__2mq9u",main:"burger-constructor_main__O9C0W",element:"burger-constructor_element__10R7L",cost:"burger-constructor_cost__3NqMY",price:"burger-constructor_price__Q5cGy",container:"burger-constructor_container__332QY",drop:"burger-constructor_drop__1AmUv"}},35:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",header:"modal_header__2iX3r",button:"modal_button__3_zvg",modaloverlay:"modal_modaloverlay__3upRD"}},5:function(e,t,n){e.exports={App:"pages_App__1x-4Z",page_content:"pages_page_content__3JA2F",buttons:"pages_buttons__1qM5S",inputs:"pages_inputs__2xtGi",header:"pages_header__6QNo8",input:"pages_input__S_VY-",save:"pages_save__2s6c6",text:"pages_text__Qy8jJ",ingredient:"pages_ingredient__1yGIg",component:"pages_component__39Paj",input_size_default:"pages_input_size_default__2Ve3g"}},73:function(e,t,n){e.exports={component:"order_component__3RloR",img:"order_img__3F8zU"}}},[[197,1,2]]]);
//# sourceMappingURL=main.d1e2e47c.chunk.js.map