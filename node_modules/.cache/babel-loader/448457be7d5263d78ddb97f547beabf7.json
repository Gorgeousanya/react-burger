{"ast":null,"code":"import _slicedToArray from\"/Users/annaplokhotnyuk/Documents/react-burger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import ingredientStyles from'./burger-ingredients.module.css';import{Tab,CurrencyIcon,Counter}from'@ya.praktikum/react-developer-burger-ui-components';import{useDispatch,useSelector}from'../../services/hooks';import{openModal,setTab}from'../../services/actions/burger';import{useDrag}from\"react-dnd\";import{useLocation,Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var bun=\"Булки\";var sauce=\"Соусы\";var main=\"Начинки\";var Card=function Card(_ref){var item=_ref.item,onClick=_ref.onClick;var _useDrag=useDrag({type:\"ingredients\",item:item}),_useDrag2=_slicedToArray(_useDrag,2),dragRef=_useDrag2[1];var location=useLocation();var constructor=useSelector(function(store){return store.burger.constructor;});var count=constructor===null||constructor===void 0?void 0:constructor.filter(function(ingredient){return ingredient._id===item._id;}).length;return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Link,{className:ingredientStyles.link,to:{pathname:\"/ingredients/\".concat(item._id),state:{background:location}},children:/*#__PURE__*/_jsxs(\"div\",{className:ingredientStyles.card,onClick:onClick,ref:dragRef,children:[count!==0&&count&&/*#__PURE__*/_jsx(\"div\",{className:ingredientStyles.counter,children:/*#__PURE__*/_jsx(Counter,{count:count,size:\"default\"})}),/*#__PURE__*/_jsx(\"img\",{src:item.image_large,className:ingredientStyles.img,alt:item.name}),/*#__PURE__*/_jsx(\"div\",{className:ingredientStyles.map,children:/*#__PURE__*/_jsxs(\"p\",{className:\"text text_type_digits-default\",children:[item.price,/*#__PURE__*/_jsx(CurrencyIcon,{type:\"primary\"})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-default\",children:item.name})]})},item._id)});};var BurgerIngredients=function BurgerIngredients(){var dispatch=useDispatch();var current=useSelector(function(store){return store.burger.tab;});var items=useSelector(function(store){return store.burger.ingredients;});function clickTab(e){var _document$getElementB;console.log(e);dispatch(setTab(e));(_document$getElementB=document.getElementById(e+\"-list\"))===null||_document$getElementB===void 0?void 0:_document$getElementB.scrollIntoView({behavior:'smooth',block:'start'});}function scrollIngredientsList(){var _document$getElementB2;var arr=[\"one\",\"two\",\"three\"];var pos=((_document$getElementB2=document.getElementById(\"ingredients-list\"))===null||_document$getElementB2===void 0?void 0:_document$getElementB2.scrollTop)||0;var res=\"\";var resdy=1000000;var dy=0;arr.forEach(function(item){var _document$getElementB3,_document$getElementB4;var offsetTopItem=((_document$getElementB3=document.getElementById(item+\"-list\"))===null||_document$getElementB3===void 0?void 0:_document$getElementB3.offsetTop)||0;var offsetTop=((_document$getElementB4=document.getElementById(\"ingredients-list\"))===null||_document$getElementB4===void 0?void 0:_document$getElementB4.offsetTop)||0;dy=Math.abs(offsetTopItem-offsetTop-pos);if(dy<resdy){res=item;resdy=dy;}});if(res!==current)dispatch(setTab(res));}var clickItem=function clickItem(el){dispatch(openModal(el));};return/*#__PURE__*/_jsxs(\"div\",{className:ingredientStyles.ingredient,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-large mt-10 mb-5\",children:\"\\u0421\\u043E\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0431\\u0443\\u0440\\u0433\\u0435\\u0440\"}),/*#__PURE__*/_jsxs(\"div\",{className:ingredientStyles.tab,children:[/*#__PURE__*/_jsx(Tab,{value:\"one\",active:current==='one',onClick:clickTab,children:bun}),/*#__PURE__*/_jsx(Tab,{value:\"two\",active:current==='two',onClick:clickTab,children:sauce}),/*#__PURE__*/_jsx(Tab,{value:\"three\",active:current==='three',onClick:clickTab,children:main})]}),/*#__PURE__*/_jsx(\"div\",{className:ingredientStyles.main,id:\"ingredients-list\",onScroll:scrollIngredientsList,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-medium\",id:\"one-list\",children:bun}),/*#__PURE__*/_jsx(\"div\",{className:ingredientStyles.map,children:items===null||items===void 0?void 0:items.map(function(item){return item.type===\"bun\"&&/*#__PURE__*/_jsx(Card,{item:item,onClick:function onClick(){clickItem(item);}},item._id);})}),/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-medium\",id:\"two-list\",children:sauce}),/*#__PURE__*/_jsx(\"div\",{className:ingredientStyles.map,children:items===null||items===void 0?void 0:items.map(function(item){return item.type===\"sauce\"&&/*#__PURE__*/_jsx(Card,{item:item,onClick:function onClick(){clickItem(item);}},item._id);})}),/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-medium\",id:\"three-list\",children:main}),/*#__PURE__*/_jsx(\"div\",{className:ingredientStyles.map,children:items===null||items===void 0?void 0:items.map(function(item){return item.type===\"main\"&&/*#__PURE__*/_jsx(Card,{item:item,onClick:function onClick(){clickItem(item);}},item._id);})})]})})]});};export default BurgerIngredients;","map":{"version":3,"sources":["/Users/annaplokhotnyuk/Documents/react-burger/src/components/burger-ingredients/burger-ingredient.tsx"],"names":["React","ingredientStyles","Tab","CurrencyIcon","Counter","useDispatch","useSelector","openModal","setTab","useDrag","useLocation","Link","bun","sauce","main","Card","item","onClick","type","dragRef","location","constructor","store","burger","count","filter","ingredient","_id","length","link","pathname","state","background","card","counter","image_large","img","name","map","price","BurgerIngredients","dispatch","current","tab","items","ingredients","clickTab","e","console","log","document","getElementById","scrollIntoView","behavior","block","scrollIngredientsList","arr","pos","scrollTop","res","resdy","dy","forEach","offsetTopItem","offsetTop","Math","abs","clickItem","el"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ingredientStyles from './burger-ingredients.module.css';\nimport { Tab, CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { TIngredient } from '../../utils/types';\nimport { useDispatch, useSelector } from '../../services/hooks';\nimport { openModal, setTab } from '../../services/actions/burger';\nimport { useDrag } from \"react-dnd\";\nimport { useLocation, Link } from 'react-router-dom';\n\nconst bun = \"Булки\";\nconst sauce = \"Соусы\";\nconst main = \"Начинки\";\n\ntype TCard = {\n  item: TIngredient,\n  onClick: () => void,\n}\n\nconst Card: React.FC<TCard> = ({ item, onClick }) => {\n  const [, dragRef] = useDrag({\n    type: \"ingredients\",\n    item: item\n  });\n\n  const location = useLocation();\n  const constructor = useSelector((store) => store.burger.constructor);\n  const count = constructor?.filter((ingredient) => ingredient._id === item._id).length;\n\n  return (\n    <React.Fragment>\n      <Link\n        className={ingredientStyles.link}\n        key={item._id}\n        to={{\n          pathname: `/ingredients/${item._id}`,\n          state: { background: location },\n        }}>\n        <div className={ingredientStyles.card} onClick={onClick} ref={dragRef}>\n          {\n            count !== 0 && count &&\n            <div className={ingredientStyles.counter}>\n              <Counter count={count} size=\"default\" />\n            </div>\n          }\n          <img src={item.image_large} className={ingredientStyles.img} alt={item.name} />\n          <div className={ingredientStyles.map}>\n            <p className=\"text text_type_digits-default\"  >\n              {item.price}\n              <CurrencyIcon type=\"primary\" />\n            </p>\n          </div>\n          <p className=\"text text_type_main-default\" >{item.name}</p>\n        </div>\n      </Link>\n    </React.Fragment>\n  )\n}\n\nconst BurgerIngredients = () => {\n  const dispatch = useDispatch();\n  const current = useSelector((store) => store.burger.tab);\n  const items = useSelector((store) => store.burger.ingredients);\n\n  function clickTab(e: string) {\n    console.log(e)\n    dispatch(setTab(e));\n    document.getElementById(e + \"-list\")?.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start'\n    });\n  }\n\n  function scrollIngredientsList() {\n    const arr = [\"one\", \"two\", \"three\"];\n    let pos = document.getElementById(\"ingredients-list\")?.scrollTop || 0;\n    let res = \"\";\n    let resdy = 1000000;\n    let dy = 0;\n    arr.forEach(item => {\n      let offsetTopItem = document.getElementById(item + \"-list\")?.offsetTop || 0;\n      let offsetTop = document.getElementById(\"ingredients-list\")?.offsetTop || 0;\n      dy = Math.abs(offsetTopItem - offsetTop - pos);\n      if (dy < resdy) { res = item; resdy = dy }\n    });\n    if (res !== current)\n      dispatch(setTab(res));\n  }\n\n  const clickItem = (el: TIngredient) => {\n    dispatch(openModal(el));\n  }\n\n  return (\n    <div className={ingredientStyles.ingredient}>\n      <p className=\"text text_type_main-large mt-10 mb-5\">\n        Соберите бургер\n      </p>\n      <div className={ingredientStyles.tab}>\n        <Tab value=\"one\" active={current === 'one'} onClick={clickTab}>\n          {bun}\n        </Tab>\n        <Tab value=\"two\" active={current === 'two'} onClick={clickTab}>\n          {sauce}\n        </Tab>\n        <Tab value=\"three\" active={current === 'three'} onClick={clickTab}>\n          {main}\n        </Tab>\n      </div>\n      <div className={ingredientStyles.main} id=\"ingredients-list\" onScroll={scrollIngredientsList}>\n        <div >\n          <p className=\"text text_type_main-medium\" id=\"one-list\">\n            {bun}\n          </p>\n          <div className={ingredientStyles.map} >\n            {items?.map((item) =>\n              item.type === \"bun\" &&\n              <Card key={item._id} item={item} onClick={() => { clickItem(item) }} />)\n            }\n          </div>\n          <p className=\"text text_type_main-medium\" id=\"two-list\">\n            {sauce}\n          </p>\n          <div className={ingredientStyles.map}>\n            {items?.map((item) =>\n              item.type === \"sauce\" &&\n              <Card key={item._id} item={item} onClick={() => { clickItem(item) }} />)\n            }\n          </div>\n          <p className=\"text text_type_main-medium\" id=\"three-list\">\n            {main}\n          </p>\n          <div className={ingredientStyles.map}>\n            {items?.map((item) =>\n              item.type === \"main\" &&\n              <Card key={item._id} item={item} onClick={() => { clickItem(item) }} />)\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n\nexport default BurgerIngredients;"]},"metadata":{},"sourceType":"module"}