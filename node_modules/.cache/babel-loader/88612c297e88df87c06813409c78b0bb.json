{"ast":null,"code":"import _defineProperty from\"/Users/annaplokhotnyuk/Documents/react-burger/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/annaplokhotnyuk/Documents/react-burger/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/annaplokhotnyuk/Documents/react-burger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'./pages.module.css';import{Redirect,useHistory,useLocation}from'react-router-dom';import React,{useState,useRef}from'react';import{Input,Button}from'@ya.praktikum/react-developer-burger-ui-components';import{login}from'../services/actions/auth';import{useDispatch,useSelector}from'../services/hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginPage(){var history=useHistory();var location=useLocation();var inputRef=useRef(null);var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setValue=_useState2[1];var dispatch=useDispatch();var loggedIn=useSelector(function(state){return state.auth.loggedIn;});var onChange=function onChange(e){setValue(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var onRegister=function onRegister(){history.replace({pathname:'/register'});};var onForgotPassword=function onForgotPassword(){history.replace({pathname:'/forgot-password'});};var onSubmit=function onSubmit(e){e.preventDefault();dispatch(login(form.email,form.password));};if(loggedIn){var _location$state;return/*#__PURE__*/_jsx(Redirect,{to:((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.from)||'/'});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.App,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.inputs,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.input,children:/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-medium\",children:\"\\u0412\\u0445\\u043E\\u0434\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.input,children:/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"E-mail\",onChange:onChange,value:form.email,name:\"email\",error:false,ref:inputRef,errorText:'Ошибка',size:'default'})}),/*#__PURE__*/_jsx(\"div\",{className:styles.input,children:/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",onChange:onChange,value:form.password,name:\"password\",error:false,ref:inputRef,errorText:'Ошибка',size:'default'})}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"medium\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.save,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-default text_color_inactive\",children:\"\\u0412\\u044B\\xA0\\u2014 \\u043D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C?\"}),/*#__PURE__*/_jsx(Button,{type:\"secondary\",size:\"medium\",onClick:onRegister,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.save,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-default text_color_inactive\",children:\"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\"}),/*#__PURE__*/_jsx(Button,{type:\"secondary\",size:\"medium\",onClick:onForgotPassword,children:\"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]})]});}","map":{"version":3,"sources":["/Users/annaplokhotnyuk/Documents/react-burger/src/pages/login.tsx"],"names":["styles","Redirect","useHistory","useLocation","React","useState","useRef","Input","Button","login","useDispatch","useSelector","LoginPage","history","location","inputRef","email","password","form","setValue","dispatch","loggedIn","state","auth","onChange","e","target","name","value","onRegister","replace","pathname","onForgotPassword","onSubmit","preventDefault","from","App","inputs","input","save"],"mappings":"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","sourcesContent":["import styles from './pages.module.css';\nimport { Redirect, useHistory, useLocation } from 'react-router-dom';\nimport React, { useState, useRef, SyntheticEvent } from 'react';\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { login } from '../services/actions/auth';\nimport { useDispatch, useSelector } from '../services/hooks';\n\ninterface LocationState {\n  from: {\n    pathname: string;\n  };\n}\n\nexport default function LoginPage() {\n  const history = useHistory();\n  const location = useLocation<LocationState>();\n  const inputRef = useRef(null)\n  const [form, setValue] = useState({ email: '', password: '' });\n  const dispatch = useDispatch();\n  const loggedIn = useSelector((state) => state.auth.loggedIn);\n\n  const onChange = (e:React.ChangeEvent<HTMLInputElement>) => {\n    setValue({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const onRegister = () => {\n    history.replace({ pathname: '/register' });\n  };\n\n  const onForgotPassword = () => {\n    history.replace({ pathname: '/forgot-password' });\n  };\n\n  const onSubmit = (e: SyntheticEvent<Element, Event>) => {\n    e.preventDefault();\n    dispatch(login(form.email, form.password));\n};\n\nif (loggedIn) {\n  return (\n      <Redirect to={location.state?.from || '/'} />\n  );\n}\n\n  return (\n    <div className={styles.App}>\n      <div className={styles.inputs}>\n        <div className={styles.input}>\n          <p className=\"text text_type_main-medium\">\n            Вход\n          </p>\n        </div>\n        <form onSubmit={onSubmit}>\n        <div className={styles.input}>\n          <Input\n            type='text'\n            placeholder='E-mail'\n            onChange={onChange}\n            value={form.email}\n            name='email'\n            error={false}\n            ref={inputRef}\n            errorText={'Ошибка'}\n            size={'default'}\n          />\n        </div>\n        <div className={styles.input}>\n        <Input\n            type='text'\n            placeholder='Пароль'\n            onChange={onChange}\n            value={form.password} \n            name='password'\n            error={false}\n            ref={inputRef}\n            errorText={'Ошибка'}\n            size={'default'}\n          />\n        </div>\n        <Button type=\"primary\" size=\"medium\" >\n          Войти\n        </Button>\n        </form>\n      </div>\n      <div className={styles.save}>\n        <p className=\"text text_type_main-default text_color_inactive\">\n          Вы — новый пользователь?\n        </p>\n        <Button type=\"secondary\" size=\"medium\" onClick={onRegister}>\n          Зарегистрироваться\n        </Button>\n      </div>\n      <div className={styles.save}>\n        <p className=\"text text_type_main-default text_color_inactive\">\n          Забыли пароль?\n        </p>\n        <Button type=\"secondary\" size=\"medium\" onClick={onForgotPassword}>\n          Восстановить пароль\n        </Button>\n      </div>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}