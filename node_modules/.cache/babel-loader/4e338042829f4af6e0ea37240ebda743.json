{"ast":null,"code":"var _jsxFileName = \"/Users/annaplokhotnyuk/Documents/react-burger/src/pages/order.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from '../services/hooks';\nimport styles from './pages.module.css';\nimport { wsConnectionClosedAction, wsConnectionStartAction } from '../services/actions/feed';\nimport { formatRelative } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport { useParams, useLocation } from 'react-router-dom';\nimport { formatStatus } from '../services/utils';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst OrderPage = () => {\n  _s();\n\n  var _orders$orders;\n\n  const {\n    id\n  } = useParams();\n  const location = useLocation();\n  console.log(location.pathname.split('/')[1]);\n  const orders = useSelector(state => state.feed.orders);\n  const order = orders === null || orders === void 0 ? void 0 : (_orders$orders = orders.orders) === null || _orders$orders === void 0 ? void 0 : _orders$orders.find(item => item._id === id);\n  const ingredients = useSelector(store => store.burger.ingredients);\n  const payload = location.pathname.split('/')[1] == 'feed' ? '/all' : '';\n  const orderIngredients = ingredients === null || ingredients === void 0 ? void 0 : ingredients.filter(ingredient => order === null || order === void 0 ? void 0 : order.ingredients.includes(ingredient._id));\n  const totalPrice = orderIngredients.reduce((total, cur) => {\n    const sumIngredients = cur.type == 'bun' ? cur.price : cur.price * 2;\n    total += sumIngredients;\n    return total;\n  }, 0);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(wsConnectionStartAction(location.pathname.split('/')[1] == 'feed' ? false : true, payload));\n    return () => {\n      dispatch(wsConnectionClosedAction());\n    };\n  }, [dispatch]);\n  if (!order) return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: styles.modal,\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text text_type_main-medium mt-30\",\n      children: \" \\u041F\\u043E\\u0434\\u043E\\u0436\\u0434\\u0438\\u0442\\u0435, \\u0438\\u0434\\u0435\\u0442 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: styles.modal,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text text_type_digits-default \",\n      children: [\"#\", order === null || order === void 0 ? void 0 : order.number]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.content,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text text_type_main-medium mt-10\",\n        children: [\" \", order === null || order === void 0 ? void 0 : order.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.status,\n        children: formatStatus((order === null || order === void 0 ? void 0 : order.status) || '')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text text_type_main-medium mt-6 mb-3\",\n        children: \"\\u0421\\u043E\\u0441\\u0442\\u0430\\u0432:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), orderIngredients === null || orderIngredients === void 0 ? void 0 : orderIngredients.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.ingredients,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: styles.image,\n          src: item === null || item === void 0 ? void 0 : item.image_mobile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_main-default\",\n          children: item === null || item === void 0 ? void 0 : item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.total,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text text_type_digits-default mr-2\",\n            children: [item.type === 'bun' ? 2 : 1, \" x \", item === null || item === void 0 ? void 0 : item.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CurrencyIcon, {\n            type: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.row,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_main-default text_color_inactive \",\n          children: order ? formatRelative(new Date(order.createdAt), new Date(), {\n            locale: ru\n          }) : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.total,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text text_type_digits-default mr-2 \",\n            children: [\" \", totalPrice]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CurrencyIcon, {\n            type: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n\n_s(OrderPage, \"/Gwi8TvZTwglOt/opJ5Ikd4+c4I=\", false, function () {\n  return [useParams, useLocation, useSelector, useSelector, useDispatch];\n});\n\n_c = OrderPage;\nexport default OrderPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderPage\");","map":{"version":3,"sources":["/Users/annaplokhotnyuk/Documents/react-burger/src/pages/order.tsx"],"names":["useEffect","useDispatch","useSelector","styles","wsConnectionClosedAction","wsConnectionStartAction","formatRelative","ru","useParams","useLocation","formatStatus","CurrencyIcon","OrderPage","id","location","console","log","pathname","split","orders","state","feed","order","find","item","_id","ingredients","store","burger","payload","orderIngredients","filter","ingredient","includes","totalPrice","reduce","total","cur","sumIngredients","type","price","dispatch","modal","number","content","name","status","map","index","image","image_mobile","row","Date","createdAt","locale"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,mBAAzC;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,SACEC,wBADF,EAEEC,uBAFF,QAGO,0BAHP;AAIA,SAASC,cAAT,QAA+B,UAA/B;AACA,SAASC,EAAT,QAAmB,iBAAnB;AAEA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,kBAAvC;AACA,SAASC,YAAT,QAA6B,mBAA7B;AACA,SAASC,YAAT,QAA6B,oDAA7B;;;AAEA,MAAMC,SAAmB,GAAG,MAAM;AAAA;;AAAA;;AAChC,QAAM;AAAEC,IAAAA;AAAF,MAASL,SAAS,EAAxB;AACA,QAAMM,QAAQ,GAAGL,WAAW,EAA5B;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,QAAT,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAZ;AACA,QAAMC,MAAM,GAAGjB,WAAW,CAAEkB,KAAD,IAAWA,KAAK,CAACC,IAAN,CAAWF,MAAvB,CAA1B;AACA,QAAMG,KAAK,GAAGH,MAAH,aAAGA,MAAH,yCAAGA,MAAM,CAAEA,MAAX,mDAAG,eAAgBI,IAAhB,CAAsBC,IAAD,IAAUA,IAAI,CAACC,GAAL,KAAaZ,EAA5C,CAAd;AACA,QAAMa,WAAW,GAAGxB,WAAW,CAAEyB,KAAD,IAAWA,KAAK,CAACC,MAAN,CAAaF,WAAzB,CAA/B;AACA,QAAMG,OAAO,GAAGf,QAAQ,CAACG,QAAT,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,KAAiC,MAAjC,GAAyC,MAAzC,GAAkD,EAAlE;AACA,QAAMY,gBAAgB,GAAGJ,WAAH,aAAGA,WAAH,uBAAGA,WAAW,CAAEK,MAAb,CAAqBC,UAAD,IAA6BV,KAA7B,aAA6BA,KAA7B,uBAA6BA,KAAK,CAAEI,WAAP,CAAmBO,QAAnB,CAA4BD,UAAU,CAACP,GAAvC,CAAjD,CAAzB;AAEA,QAAMS,UAAU,GAAGJ,gBAAgB,CAACK,MAAjB,CAAwB,CAACC,KAAD,EAAgBC,GAAhB,KAAqC;AAC9E,UAAMC,cAAc,GAAGD,GAAG,CAACE,IAAJ,IAAY,KAAZ,GAAoBF,GAAG,CAACG,KAAxB,GAAgCH,GAAG,CAACG,KAAJ,GAAY,CAAnE;AACAJ,IAAAA,KAAK,IAAIE,cAAT;AACA,WAAOF,KAAP;AACD,GAJkB,EAIhB,CAJgB,CAAnB;AAMA,QAAMK,QAAQ,GAAGxC,WAAW,EAA5B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdyC,IAAAA,QAAQ,CAACpC,uBAAuB,CAAES,QAAQ,CAACG,QAAT,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,KAAiC,MAAjC,GAAyC,KAAzC,GAAiD,IAAnD,EAAyDW,OAAzD,CAAxB,CAAR;AAEA,WAAO,MAAM;AACXY,MAAAA,QAAQ,CAACrC,wBAAwB,EAAzB,CAAR;AACD,KAFD;AAGD,GANQ,EAMN,CAACqC,QAAD,CANM,CAAT;AAQA,MAAI,CAACnB,KAAL,EACA,oBACE;AAAM,IAAA,SAAS,EAAEnB,MAAM,CAACuC,KAAxB;AAAA,2BACA;AAAG,MAAA,SAAS,EAAC,kCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,UADF;AAMA,sBACE;AAAM,IAAA,SAAS,EAAEvC,MAAM,CAACuC,KAAxB;AAAA,4BACE;AAAG,MAAA,SAAS,EAAC,gCAAb;AAAA,sBAAgDpB,KAAhD,aAAgDA,KAAhD,uBAAgDA,KAAK,CAAEqB,MAAvD;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAExC,MAAM,CAACyC,OAAvB;AAAA,8BACE;AAAG,QAAA,SAAS,EAAC,kCAAb;AAAA,wBAAkDtB,KAAlD,aAAkDA,KAAlD,uBAAkDA,KAAK,CAAEuB,IAAzD;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAG,QAAA,SAAS,EAAE1C,MAAM,CAAC2C,MAArB;AAAA,kBAA8BpC,YAAY,CAAC,CAAAY,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEwB,MAAP,KAAe,EAAhB;AAA1C;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE;AAAG,QAAA,SAAS,EAAC,sCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF,EAMGhB,gBANH,aAMGA,gBANH,uBAMGA,gBAAgB,CAAEiB,GAAlB,CAAsB,CAACvB,IAAD,EAAoBwB,KAApB,kBACrB;AAAK,QAAA,SAAS,EAAE7C,MAAM,CAACuB,WAAvB;AAAA,gCACE;AAAK,UAAA,SAAS,EAAEvB,MAAM,CAAC8C,KAAvB;AAA8B,UAAA,GAAG,EAAEzB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAE0B;AAAzC;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAG,UAAA,SAAS,EAAC,6BAAb;AAAA,oBAA4C1B,IAA5C,aAA4CA,IAA5C,uBAA4CA,IAAI,CAAEqB;AAAlD;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAK,UAAA,SAAS,EAAE1C,MAAM,CAACiC,KAAvB;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,oCAAb;AAAA,uBACGZ,IAAI,CAACe,IAAL,KAAc,KAAd,GAAsB,CAAtB,GAA0B,CAD7B,SACmCf,IADnC,aACmCA,IADnC,uBACmCA,IAAI,CAAEgB,KADzC;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE,QAAC,YAAD;AAAc,YAAA,IAAI,EAAC;AAAnB;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF;AAAA,SAAyCQ,KAAzC;AAAA;AAAA;AAAA;AAAA,cADD,CANH,eAkBE;AAAK,QAAA,SAAS,EAAE7C,MAAM,CAACgD,GAAvB;AAAA,gCACE;AAAG,UAAA,SAAS,EAAC,kDAAb;AAAA,oBAAiE7B,KAAK,GAAGhB,cAAc,CAAC,IAAI8C,IAAJ,CAAS9B,KAAK,CAAC+B,SAAf,CAAD,EAA4B,IAAID,IAAJ,EAA5B,EAAwC;AACrIE,YAAAA,MAAM,EAAE/C;AAD6H,WAAxC,CAAjB,GAEzE;AAFG;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE;AAAK,UAAA,SAAS,EAAEJ,MAAM,CAACiC,KAAvB;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,qCAAb;AAAA,4BAAqDF,UAArD;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,YAAD;AAAc,YAAA,IAAI,EAAC;AAAnB;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,cAlBF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAiCD,CAlED;;GAAMtB,S;UACWJ,S,EACEC,W,EAEFP,W,EAEKA,W,EAUHD,W;;;KAhBbW,S;AAoEN,eAAeA,SAAf","sourcesContent":["import { useEffect } from 'react';\nimport { useDispatch, useSelector } from '../services/hooks';\nimport styles from './pages.module.css';\nimport {\n  wsConnectionClosedAction,\n  wsConnectionStartAction,\n} from '../services/actions/feed';\nimport { formatRelative } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport { TIngredient } from '../utils/types';\nimport { useParams, useLocation } from 'react-router-dom';\nimport { formatStatus } from '../services/utils'\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\n\nconst OrderPage: React.FC = () => {\n  const { id } = useParams<{ id?: string }>();\n  const location = useLocation();\n  console.log(location.pathname.split('/')[1])\n  const orders = useSelector((state) => state.feed.orders);\n  const order = orders?.orders?.find((item) => item._id === id);\n  const ingredients = useSelector((store) => store.burger.ingredients);\n  const payload = location.pathname.split('/')[1]=='feed'? '/all' : ''\n  const orderIngredients = ingredients?.filter((ingredient: TIngredient) => order?.ingredients.includes(ingredient._id));\n\n  const totalPrice = orderIngredients.reduce((total: number, cur: TIngredient) => {\n    const sumIngredients = cur.type == 'bun' ? cur.price : cur.price * 2;\n    total += sumIngredients;\n    return total;\n  }, 0);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(wsConnectionStartAction( location.pathname.split('/')[1]=='feed'? false : true, payload));\n\n    return () => {\n      dispatch(wsConnectionClosedAction());\n    };\n  }, [dispatch]);\n\n  if (!order)\n  return (\n    <main className={styles.modal} >\n    <p className=\"text text_type_main-medium mt-30\"> Подождите, идет загрузка...</p>\n    </main>\n  )\n\n  return (\n    <main className={styles.modal} >\n      <p className=\"text text_type_digits-default \">#{order?.number}</p>\n      <div className={styles.content}>\n        <p className=\"text text_type_main-medium mt-10\"> {order?.name}</p>\n        <p className={styles.status}>{formatStatus(order?.status||'')}</p>\n        <p className=\"text text_type_main-medium mt-6 mb-3\">\n          Состав:\n        </p>\n        {orderIngredients?.map((item: TIngredient, index: number) => (\n          <div className={styles.ingredients} key={index}>\n            <img className={styles.image} src={item?.image_mobile} />\n            <p className=\"text text_type_main-default\">{item?.name}</p>\n            <div className={styles.total}>\n              <p className=\"text text_type_digits-default mr-2\">\n                {item.type === 'bun' ? 2 : 1} x {item?.price}\n              </p>\n              <CurrencyIcon type=\"primary\" />\n            </div>\n          </div>\n        ))}\n        <div className={styles.row}>\n          <p className=\"text text_type_main-default text_color_inactive \">{order ? formatRelative(new Date(order.createdAt), new Date(), {\n    locale: ru,\n  }) : ''}</p>\n          <div className={styles.total}>\n            <p className=\"text text_type_digits-default mr-2 \"> {totalPrice}</p>\n            <CurrencyIcon type=\"primary\" />\n          </div>\n        </div>\n      </div>\n    </main>\n  )\n}\n\nexport default OrderPage;\n\n"]},"metadata":{},"sourceType":"module"}