{"ast":null,"code":"import{useEffect}from'react';import{useDispatch,useSelector}from'../../services/hooks';import{getIngredientsData}from'../../services/actions/burger';import{getUser}from'../../services/actions/auth';import{Switch,Route,useHistory,useLocation}from'react-router-dom';import{HomePage,LoginPage,ProfilePage,RegisterPage,ForgotPasswordPage,ResetPasswordPage,IngredientDetails,FeedPage,ProfileOrders,OrderPage}from'../../pages';import ProtectedRoute from'../../components/protected-routes';import AppHeader from'../app-header/app-header';import{Modal}from'../modal/modal';import{closeModal}from'../../services/actions/burger';import{wsCloseModal}from'../../services/actions/feed';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var dispatch=useDispatch();var modalItem=useSelector(function(state){return state.burger.modal;});var modalWs=useSelector(function(state){return state.feed.wsModal;});var history=useHistory();var location=useLocation();var background=location.state&&location.state.background;useEffect(function(){dispatch(getIngredientsData());if(localStorage.refreshToken){console.log(localStorage.refreshToken);dispatch(getUser());}// @ts-ignore\nhistory.replace();},[dispatch]);var onClose=function onClose(){dispatch(closeModal);dispatch(wsCloseModal);history.goBack();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AppHeader,{}),/*#__PURE__*/_jsxs(Switch// @ts-ignore\n,{location:background||location,children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,children:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/profile/orders/:id\",children:/*#__PURE__*/_jsx(OrderPage,{})}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/profile/orders\",children:/*#__PURE__*/_jsx(ProfileOrders,{})}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/profile\",children:/*#__PURE__*/_jsx(ProfilePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",exact:true,children:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",exact:true,children:/*#__PURE__*/_jsx(RegisterPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",exact:true,children:/*#__PURE__*/_jsx(ForgotPasswordPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reset-password\",exact:true,children:/*#__PURE__*/_jsx(ResetPasswordPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/ingredients/:id\",children:/*#__PURE__*/_jsx(IngredientDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/feed/:id\",exact:true,children:/*#__PURE__*/_jsx(OrderPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/feed\",exact:true,children:/*#__PURE__*/_jsx(FeedPage,{})})]}),modalItem&&background&&/*#__PURE__*/_jsx(Route,{path:\"/ingredients/:id\",exact:true,children:/*#__PURE__*/_jsxs(Modal,{isOpen:modalItem,onClose:onClose,children:[\" \",/*#__PURE__*/_jsx(IngredientDetails,{})]})}),background&&/*#__PURE__*/_jsx(Route,{path:\"/feed/:id\",exact:true,children:/*#__PURE__*/_jsx(Modal,{isOpen:modalWs,onClose:onClose,children:/*#__PURE__*/_jsx(OrderPage,{})})}),modalWs&&background&&/*#__PURE__*/_jsx(Route,{path:\"/profile/orders/:id\",exact:true,children:/*#__PURE__*/_jsx(Modal,{isOpen:modalWs,onClose:onClose,children:/*#__PURE__*/_jsx(OrderPage,{})})})]});};export default App;","map":{"version":3,"sources":["/Users/annaplokhotnyuk/Documents/react-burger/src/components/app/App.tsx"],"names":["useEffect","useDispatch","useSelector","getIngredientsData","getUser","Switch","Route","useHistory","useLocation","HomePage","LoginPage","ProfilePage","RegisterPage","ForgotPasswordPage","ResetPasswordPage","IngredientDetails","FeedPage","ProfileOrders","OrderPage","ProtectedRoute","AppHeader","Modal","closeModal","wsCloseModal","App","dispatch","modalItem","state","burger","modal","modalWs","feed","wsModal","history","location","background","localStorage","refreshToken","console","log","replace","onClose","goBack"],"mappings":"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","sourcesContent":["import { useEffect, FC } from 'react';\nimport { useDispatch, useSelector } from '../../services/hooks';\nimport { getIngredientsData } from '../../services/actions/burger';\nimport { getUser } from '../../services/actions/auth'\nimport { Switch, Route, useHistory, useLocation } from 'react-router-dom';\nimport { HomePage, LoginPage, ProfilePage, RegisterPage, ForgotPasswordPage, ResetPasswordPage, IngredientDetails, FeedPage, ProfileOrders, OrderPage } from '../../pages';\nimport ProtectedRoute from '../../components/protected-routes'\nimport AppHeader from '../app-header/app-header';\nimport { Modal } from '../modal/modal';\nimport { closeModal } from '../../services/actions/burger';\nimport { wsCloseModal } from '../../services/actions/feed';\n\ntype TLocation = {\n  from: Location;\n  background?: Location;\n}\n\nconst App: FC = () => {\n  const dispatch = useDispatch();\n  let modalItem = useSelector((state) => state.burger.modal);\n  let modalWs = useSelector((state)=> state.feed.wsModal)\n  const history = useHistory();\n  const location = useLocation<TLocation>();\n  let background = location.state && location.state.background;\n\n  useEffect(\n    () => {\n      dispatch(getIngredientsData());\n      if (localStorage.refreshToken){\n        console.log(localStorage.refreshToken)\n        dispatch(getUser());\n      }\n      // @ts-ignore\n      history.replace()\n    },\n    [dispatch]\n  );\n\n  const onClose = () => {\n    dispatch(closeModal)\n    dispatch(wsCloseModal)\n    history.goBack()\n  }\n\n  return (\n    <div>\n      <AppHeader />\n      <Switch\n        // @ts-ignore\n        location={background || location}>\n        <Route path=\"/\" exact={true}>\n          <HomePage />\n        </Route>\n        <ProtectedRoute path=\"/profile/orders/:id\">\n          <OrderPage />\n        </ProtectedRoute>\n        <ProtectedRoute path=\"/profile/orders\">\n          <ProfileOrders />\n        </ProtectedRoute>\n        <ProtectedRoute path=\"/profile\" >\n          <ProfilePage />\n        </ProtectedRoute>\n        <Route path=\"/login\" exact={true}>\n          <LoginPage />\n        </Route>\n        <Route path=\"/register\" exact={true}>\n          <RegisterPage />\n        </Route>\n        <Route path=\"/forgot-password\" exact={true}>\n          <ForgotPasswordPage />\n        </Route>\n        <Route path=\"/reset-password\" exact={true}>\n          <ResetPasswordPage />\n        </Route>\n        <Route path=\"/ingredients/:id\" >\n          <IngredientDetails />\n        </Route>\n        <Route path=\"/feed/:id\" exact={true}>\n          <OrderPage />\n        </Route>\n        <Route path=\"/feed\" exact={true}>\n          <FeedPage />\n        </Route>\n      </Switch>\n      {modalItem && background &&\n        <Route path=\"/ingredients/:id\" exact={true}>\n          <Modal isOpen={modalItem} onClose={onClose}\n          > <IngredientDetails />\n          </Modal>\n        </Route>\n      }\n      { background &&\n        <Route path=\"/feed/:id\" exact={true}>\n          <Modal isOpen={modalWs} onClose={onClose}>\n            <OrderPage />\n          </Modal>\n        </Route>\n      }\n      {modalWs && background &&\n        <Route path=\"/profile/orders/:id\" exact={true}>\n          <Modal isOpen={modalWs} onClose={onClose}>\n            <OrderPage />\n          </Modal>\n        </Route>\n      }\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}