{"ast":null,"code":"import React from'react';import{Link,useLocation}from'react-router-dom';import styles from'./order-item.module.css';import{CurrencyIcon}from'@ya.praktikum/react-developer-burger-ui-components';import{useSelector,useDispatch}from'../../services/hooks';import{formatStatus}from'../../services/utils';import{wsOpenModal}from'../../services/actions/feed';import{formatRelative}from'date-fns';import{ru}from'date-fns/locale';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var OrderItem=function OrderItem(_ref){var number=_ref.number,createdAt=_ref.createdAt,name=_ref.name,ingredientsId=_ref.ingredientsId,id=_ref.id,status=_ref.status;var location=useLocation();var dispatch=useDispatch();var ingredients=useSelector(function(store){return store.burger.ingredients;});var orderIngredients=ingredients.filter(function(ingredient){return ingredientsId.includes(ingredient._id);}).reverse();var orderIngredientsShow=orderIngredients.length>5?orderIngredients.slice(0,5):orderIngredients;var orderIngredientsHidden=orderIngredients.length>5?orderIngredients.length-5:0;var totalPrice=React.useMemo(function(){return orderIngredients?orderIngredients.reduce(function(sum,current){return sum+current.price;},0):0;},[orderIngredients]);var onClick=function onClick(){dispatch(wsOpenModal);};return/*#__PURE__*/_jsx(Link,{to:{pathname:\"\".concat(location.pathname,\"/\").concat(id),state:{background:location}},className:styles.link,onClick:onClick,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.item,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.data,children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text text_type_digits-default\",children:[\"#\",number]}),/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-default text_color_inactive\",children:formatRelative(new Date(createdAt),new Date(),{locale:ru})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-medium pt-6 pb-4\",children:name}),/*#__PURE__*/_jsx(\"p\",{className:styles.status,children:formatStatus(status)}),/*#__PURE__*/_jsxs(\"div\",{className:styles.data,children:[/*#__PURE__*/_jsx(\"ul\",{className:styles.list,children:orderIngredientsShow.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:styles.images,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.image,src:item.image,alt:item.name}),index===0&&orderIngredientsHidden>0&&/*#__PURE__*/_jsxs(\"p\",{className:styles.count,children:[\"+\",orderIngredientsHidden]})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.price,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_digits-default\",children:totalPrice}),/*#__PURE__*/_jsx(CurrencyIcon,{type:\"primary\"})]})]})]})});};export default OrderItem;","map":{"version":3,"sources":["/Users/annaplokhotnyuk/Documents/react-burger/src/components/order-item/order-item.tsx"],"names":["React","Link","useLocation","styles","CurrencyIcon","useSelector","useDispatch","formatStatus","wsOpenModal","formatRelative","ru","OrderItem","number","createdAt","name","ingredientsId","id","status","location","dispatch","ingredients","store","burger","orderIngredients","filter","ingredient","includes","_id","reverse","orderIngredientsShow","length","slice","orderIngredientsHidden","totalPrice","useMemo","reduce","sum","current","price","onClick","pathname","state","background","link","item","data","Date","locale","list","map","index","images","image","count"],"mappings":"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","sourcesContent":["import React, { FC } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport styles from './order-item.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useSelector, useDispatch } from '../../services/hooks';\nimport { TIngredient, TOrderInfo } from '../../utils/types';\nimport { formatStatus } from '../../services/utils';\nimport { wsOpenModal } from '../../services/actions/feed';\nimport { formatRelative } from 'date-fns';\nimport { ru } from 'date-fns/locale';\n\nconst OrderItem: FC<TOrderInfo> = ({ number, createdAt, name, ingredientsId, id, status }) => {\n    const location = useLocation();\n    const dispatch = useDispatch();\n    const ingredients = useSelector((store) => store.burger.ingredients);\n    const orderIngredients = ingredients.filter((ingredient: TIngredient) => ingredientsId.includes(ingredient._id)).reverse();\n    const orderIngredientsShow = orderIngredients.length > 5 ? orderIngredients.slice(0, 5) : orderIngredients;\n    const orderIngredientsHidden = orderIngredients.length > 5 ? orderIngredients.length - 5 : 0;\n\n    const totalPrice = React.useMemo(\n        () => orderIngredients ? orderIngredients.reduce((sum: number, current: TIngredient) => sum + current.price, 0) : 0,\n        [orderIngredients]\n    );\n\n    const onClick = () => {\n        dispatch(wsOpenModal)\n    }\n\n    return (\n        <Link to={{ pathname: `${location.pathname}/${id}`, state: { background: location } }} className={styles.link} onClick={onClick}>\n            <div className={styles.item}>\n                <div className={styles.data}>\n                    <p className=\"text text_type_digits-default\">#{number}</p>\n                    <p className=\"text text_type_main-default text_color_inactive\">{formatRelative(new Date(createdAt), new Date(), {\n                        locale: ru,\n                    })}</p>\n                </div>\n                <p className=\"text text_type_main-medium pt-6 pb-4\">{name}</p>\n                <p className={styles.status}>{formatStatus(status)}</p>\n                <div className={styles.data}>\n                    <ul className={styles.list}>\n                        {orderIngredientsShow.map((item: TIngredient, index: number) => (\n                            <div key={index} className={styles.images}>\n                                <img className={styles.image} src={item.image} alt={item.name} />\n                                {index === 0 && orderIngredientsHidden > 0 && (\n                                    <p className={styles.count}>+{orderIngredientsHidden}</p>\n                                )}\n                            </div>\n                        ))}\n                    </ul>\n                    <div className={styles.price}>\n                        <p className=\"text text_type_digits-default\">{totalPrice}</p>\n                        <CurrencyIcon type=\"primary\" />\n                    </div>\n                </div>\n            </div>\n        </Link>\n    )\n}\n\nexport default OrderItem;"]},"metadata":{},"sourceType":"module"}