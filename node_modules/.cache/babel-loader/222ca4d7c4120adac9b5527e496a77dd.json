{"ast":null,"code":"var _jsxFileName = \"/Users/annaplokhotnyuk/Documents/react-burger/src/components/order-item/order-item.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport styles from './order-item.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useSelector, useDispatch } from '../../services/hooks';\nimport { formatStatus } from '../../services/utils';\nimport { wsOpenModal } from '../../services/actions/feed';\nimport { formatRelative } from 'date-fns';\nimport { ru } from 'date-fns/locale';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst OrderItem = _ref => {\n  _s();\n\n  let {\n    number,\n    createdAt,\n    name,\n    ingredientsId,\n    id,\n    status\n  } = _ref;\n  const location = useLocation();\n  const dispatch = useDispatch();\n  const ingredients = useSelector(store => store.burger.ingredients);\n  const orderIngredients = ingredients.filter(ingredient => ingredientsId.includes(ingredient._id)).reverse();\n  const orderIngredientsShow = orderIngredients.length > 5 ? orderIngredients.slice(0, 5) : orderIngredients;\n  const orderIngredientsHidden = orderIngredients.length > 5 ? orderIngredients.length - 5 : 0;\n  const totalPrice = React.useMemo(() => orderIngredients ? orderIngredients.reduce((sum, current) => sum + current.price, 0) : 0, [orderIngredients]);\n\n  const onClick = () => {\n    dispatch(wsOpenModal);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Link, {\n    to: {\n      pathname: `${location.pathname}/${id}`,\n      state: {\n        background: location\n      }\n    },\n    className: styles.link,\n    onClick: onClick,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.item,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.data,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_digits-default\",\n          children: [\"#\", number]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_main-default text_color_inactive\",\n          children: formatRelative(new Date(createdAt), new Date(), {\n            locale: ru\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text text_type_main-medium pt-6 pb-4\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.status,\n        children: formatStatus(status)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.data,\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          className: styles.list,\n          children: orderIngredientsShow.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.images,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: styles.image,\n              src: item.image,\n              alt: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 33\n            }, this), index === 0 && orderIngredientsHidden > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.count,\n              children: [\"+\", orderIngredientsHidden]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 37\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.price,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text text_type_digits-default\",\n            children: totalPrice\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(CurrencyIcon, {\n            type: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 9\n  }, this);\n};\n\n_s(OrderItem, \"uvyYHi/9BFeAxnsJgDiduAjZ5fg=\", false, function () {\n  return [useLocation, useDispatch, useSelector];\n});\n\n_c = OrderItem;\nexport default OrderItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderItem\");","map":{"version":3,"sources":["/Users/annaplokhotnyuk/Documents/react-burger/src/components/order-item/order-item.tsx"],"names":["React","Link","useLocation","styles","CurrencyIcon","useSelector","useDispatch","formatStatus","wsOpenModal","formatRelative","ru","OrderItem","number","createdAt","name","ingredientsId","id","status","location","dispatch","ingredients","store","burger","orderIngredients","filter","ingredient","includes","_id","reverse","orderIngredientsShow","length","slice","orderIngredientsHidden","totalPrice","useMemo","reduce","sum","current","price","onClick","pathname","state","background","link","item","data","Date","locale","list","map","index","images","image","count"],"mappings":"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","sourcesContent":["import React, { FC } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport styles from './order-item.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useSelector, useDispatch } from '../../services/hooks';\nimport { TIngredient, TOrderInfo } from '../../utils/types';\nimport { formatStatus } from '../../services/utils';\nimport { wsOpenModal } from '../../services/actions/feed';\nimport { formatRelative } from 'date-fns';\nimport { ru } from 'date-fns/locale';\n\nconst OrderItem: FC<TOrderInfo> = ({ number, createdAt, name, ingredientsId, id, status }) => {\n    const location = useLocation();\n    const dispatch = useDispatch();\n    const ingredients = useSelector((store) => store.burger.ingredients);\n    const orderIngredients = ingredients.filter((ingredient: TIngredient) => ingredientsId.includes(ingredient._id)).reverse();\n    const orderIngredientsShow = orderIngredients.length > 5 ? orderIngredients.slice(0, 5) : orderIngredients;\n    const orderIngredientsHidden = orderIngredients.length > 5 ? orderIngredients.length - 5 : 0;\n\n    const totalPrice = React.useMemo(\n        () => orderIngredients ? orderIngredients.reduce((sum: number, current: TIngredient) => sum + current.price, 0) : 0,\n        [orderIngredients]\n    );\n\n    const onClick = () => {\n        dispatch(wsOpenModal)\n    }\n\n    return (\n        <Link to={{ pathname: `${location.pathname}/${id}`, state: { background: location } }} className={styles.link} onClick={onClick}>\n            <div className={styles.item}>\n                <div className={styles.data}>\n                    <p className=\"text text_type_digits-default\">#{number}</p>\n                    <p className=\"text text_type_main-default text_color_inactive\">{formatRelative(new Date(createdAt), new Date(), {\n                        locale: ru,\n                    })}</p>\n                </div>\n                <p className=\"text text_type_main-medium pt-6 pb-4\">{name}</p>\n                <p className={styles.status}>{formatStatus(status)}</p>\n                <div className={styles.data}>\n                    <ul className={styles.list}>\n                        {orderIngredientsShow.map((item: TIngredient, index: number) => (\n                            <div key={index} className={styles.images}>\n                                <img className={styles.image} src={item.image} alt={item.name} />\n                                {index === 0 && orderIngredientsHidden > 0 && (\n                                    <p className={styles.count}>+{orderIngredientsHidden}</p>\n                                )}\n                            </div>\n                        ))}\n                    </ul>\n                    <div className={styles.price}>\n                        <p className=\"text text_type_digits-default\">{totalPrice}</p>\n                        <CurrencyIcon type=\"primary\" />\n                    </div>\n                </div>\n            </div>\n        </Link>\n    )\n}\n\nexport default OrderItem;"]},"metadata":{},"sourceType":"module"}