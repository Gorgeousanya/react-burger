{"ast":null,"code":"import _defineProperty from\"/Users/annaplokhotnyuk/Documents/react-burger/react-burger/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/annaplokhotnyuk/Documents/react-burger/react-burger/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/annaplokhotnyuk/Documents/react-burger/react-burger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'./pages.module.css';import{Redirect,useHistory}from'react-router-dom';import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Input,PasswordInput,Button}from'@ya.praktikum/react-developer-burger-ui-components';import{resetPassword}from'../services/actions/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ResetPasswordPage(){var auth=useSelector(function(state){return state.auth;});var dispatch=useDispatch();var history=useHistory();var prevPathname=history.location.state;var _useState=useState({password:\"\",token:\"\"}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var onChange=function onChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var onLogin=function onLogin(){history.replace({pathname:'/login'});};var onSubmit=function onSubmit(e){e.preventDefault();dispatch(resetPassword(form.password,form.token));if(!(auth!==null&&auth!==void 0&&auth.loggedIn.resetPasswordFailed)){history.push('/login');}else{alert(\"Не удалось восстановить пароль:(\");}};if(!prevPathname){return/*#__PURE__*/_jsx(Redirect,{to:'/login'});}if(auth!==null&&auth!==void 0&&auth.loggedIn){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.App,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.inputs,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.input,children:/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-medium\",children:\"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.input,children:/*#__PURE__*/_jsx(PasswordInput,{onChange:onChange,value:form.password,name:'password'})}),/*#__PURE__*/_jsx(\"div\",{className:styles.input,children:/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0434 \\u0438\\u0437 \\u043F\\u0438\\u0441\\u044C\\u043C\\u0430\",onChange:onChange,value:form.token,name:\"token\",error:false,errorText:'Ошибка',size:'default'})}),/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"medium\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.save,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_main-default text_color_inactive\",children:\"\\u0412\\u0441\\u043F\\u043E\\u043C\\u043D\\u0438\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\"}),/*#__PURE__*/_jsx(Button,{type:\"secondary\",size:\"medium\",onClick:onLogin,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]});}","map":{"version":3,"sources":["/Users/annaplokhotnyuk/Documents/react-burger/react-burger/src/pages/reset-password.tsx"],"names":["styles","Redirect","useHistory","React","useState","useDispatch","useSelector","Input","PasswordInput","Button","resetPassword","ResetPasswordPage","auth","state","dispatch","history","prevPathname","location","password","token","form","setForm","onChange","e","target","name","value","onLogin","replace","pathname","onSubmit","preventDefault","loggedIn","resetPasswordFailed","push","alert","App","inputs","input","save"],"mappings":"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","sourcesContent":["import styles from './pages.module.css';\nimport { Redirect, useHistory } from 'react-router-dom';\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector, RootStateOrAny } from 'react-redux';\nimport { Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { resetPassword } from '../services/actions/auth';\n\nexport default function ResetPasswordPage() {\n  const auth = useSelector((state: RootStateOrAny) => state.auth);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const prevPathname = history.location.state;\n  const [form, setForm] = useState({ password: \"\", token: \"\" });\n\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const onLogin = () => {\n    history.replace({ pathname: '/login' });\n  };\n\n  const onSubmit = (e: React.SyntheticEvent<Element, Event>) => {\n    e.preventDefault();\n    dispatch(resetPassword(form.password, form.token));\n    if (!auth?.loggedIn.resetPasswordFailed) {\n      history.push('/login');\n    }\n    else {\n      alert(\"Не удалось восстановить пароль:(\")\n    }\n  };\n\n  if (!prevPathname) {\n    return (\n      <Redirect to={'/login'} />\n    );\n  }\n\n  if (auth?.loggedIn) {\n    return (\n      <Redirect to={\"/\"} />\n    );\n  }\n\n  return (\n    <div className={styles.App}>\n      <div className={styles.inputs}>\n        <div className={styles.input}>\n          <p className=\"text text_type_main-medium\">\n            Восстановление пароля\n          </p>\n        </div>\n        <form onSubmit={onSubmit}>\n        <div className={styles.input}>\n          <PasswordInput onChange={onChange} value={form.password} name={'password'} />\n        </div>\n        <div className={styles.input}>\n          <Input\n            type='text'\n            placeholder='Введите код из письма'\n            onChange={onChange}\n            value={form.token}\n            name='token'\n            error={false}\n            errorText={'Ошибка'}\n            size={'default'}\n          />\n        </div>\n        <Button type=\"primary\" size=\"medium\">\n          Сохранить\n        </Button>\n        </form>\n      </div>\n      <div className={styles.save}>\n        <p className=\"text text_type_main-default text_color_inactive\">\n          Вспомнили пароль?\n        </p>\n        <Button type=\"secondary\" size=\"medium\" onClick={onLogin}>\n          Войти\n        </Button>\n      </div>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}