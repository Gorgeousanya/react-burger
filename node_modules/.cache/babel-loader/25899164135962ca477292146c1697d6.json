{"ast":null,"code":"var _jsxFileName = \"/Users/annaplokhotnyuk/Documents/react-burger/src/components/burger-ingredients/burger-ingredient.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React from 'react';\nimport ingredientStyles from './burger-ingredients.module.css';\nimport { Tab, CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useDispatch, useSelector } from '../../services/hooks';\nimport { openModal, setTab } from '../../services/actions/burger';\nimport { useDrag } from \"react-dnd\";\nimport { useLocation, Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst bun = \"Булки\";\nconst sauce = \"Соусы\";\nconst main = \"Начинки\";\n\nconst Card = _ref => {\n  _s();\n\n  let {\n    item,\n    onClick\n  } = _ref;\n  const [, dragRef] = useDrag({\n    type: \"ingredients\",\n    item: item\n  });\n  const location = useLocation();\n  const constructor = useSelector(store => store.burger.constructor);\n  const count = constructor === null || constructor === void 0 ? void 0 : constructor.filter(ingredient => ingredient._id === item._id).length;\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Link, {\n      className: ingredientStyles.link,\n      to: {\n        pathname: `/ingredients/${item._id}`,\n        state: {\n          background: location\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: ingredientStyles.card,\n        onClick: onClick,\n        ref: dragRef,\n        children: [count !== 0 && count && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: ingredientStyles.counter,\n          children: /*#__PURE__*/_jsxDEV(Counter, {\n            count: count,\n            size: \"default\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.image_large,\n          className: ingredientStyles.img,\n          alt: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: ingredientStyles.map,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text text_type_digits-default\",\n            children: [item.price, /*#__PURE__*/_jsxDEV(CurrencyIcon, {\n              type: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_main-default\",\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)\n    }, item._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Card, \"ckpep9Kxj6FoPOe8KYKd+Fmq4Xc=\", false, function () {\n  return [useDrag, useLocation, useSelector];\n});\n\n_c = Card;\n\nconst BurgerIngredients = () => {\n  _s2();\n\n  const dispatch = useDispatch();\n  const current = useSelector(store => store.burger.tab);\n  const items = useSelector(store => store.burger.ingredients);\n\n  function clickTab(e) {\n    var _document$getElementB;\n\n    console.log(e);\n    dispatch(setTab(e));\n    (_document$getElementB = document.getElementById(e + \"-list\")) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start'\n    });\n  }\n\n  function scrollIngredientsList() {\n    var _document$getElementB2;\n\n    const arr = [\"one\", \"two\", \"three\"];\n    let pos = ((_document$getElementB2 = document.getElementById(\"ingredients-list\")) === null || _document$getElementB2 === void 0 ? void 0 : _document$getElementB2.scrollTop) || 0;\n    let res = \"\";\n    let resdy = 1000000;\n    let dy = 0;\n    arr.forEach(item => {\n      var _document$getElementB3, _document$getElementB4;\n\n      let offsetTopItem = ((_document$getElementB3 = document.getElementById(item + \"-list\")) === null || _document$getElementB3 === void 0 ? void 0 : _document$getElementB3.offsetTop) || 0;\n      let offsetTop = ((_document$getElementB4 = document.getElementById(\"ingredients-list\")) === null || _document$getElementB4 === void 0 ? void 0 : _document$getElementB4.offsetTop) || 0;\n      dy = Math.abs(offsetTopItem - offsetTop - pos);\n\n      if (dy < resdy) {\n        res = item;\n        resdy = dy;\n      }\n    });\n    if (res !== current) dispatch(setTab(res));\n  }\n\n  const clickItem = el => {\n    dispatch(openModal(el));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: ingredientStyles.ingredient,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text text_type_main-large mt-10 mb-5\",\n      children: \"\\u0421\\u043E\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0431\\u0443\\u0440\\u0433\\u0435\\u0440\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: ingredientStyles.tab,\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        value: \"one\",\n        active: current === 'one',\n        onClick: clickTab,\n        children: bun\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        value: \"two\",\n        active: current === 'two',\n        onClick: clickTab,\n        children: sauce\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        value: \"three\",\n        active: current === 'three',\n        onClick: clickTab,\n        children: main\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: ingredientStyles.main,\n      id: \"ingredients-list\",\n      onScroll: scrollIngredientsList,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_main-medium\",\n          id: \"one-list\",\n          children: bun\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: ingredientStyles.map,\n          children: items === null || items === void 0 ? void 0 : items.map(item => item.type === \"bun\" && /*#__PURE__*/_jsxDEV(Card, {\n            item: item,\n            onClick: () => {\n              clickItem(item);\n            }\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_main-medium\",\n          id: \"two-list\",\n          children: sauce\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: ingredientStyles.map,\n          children: items === null || items === void 0 ? void 0 : items.map(item => item.type === \"sauce\" && /*#__PURE__*/_jsxDEV(Card, {\n            item: item,\n            onClick: () => {\n              clickItem(item);\n            }\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text text_type_main-medium\",\n          id: \"three-list\",\n          children: main\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: ingredientStyles.map,\n          children: items === null || items === void 0 ? void 0 : items.map(item => item.type === \"main\" && /*#__PURE__*/_jsxDEV(Card, {\n            item: item,\n            onClick: () => {\n              clickItem(item);\n            }\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(BurgerIngredients, \"Xh6POPuB5lnnqgIZrLpSB26CnXU=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c2 = BurgerIngredients;\nexport default BurgerIngredients;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Card\");\n$RefreshReg$(_c2, \"BurgerIngredients\");","map":{"version":3,"sources":["/Users/annaplokhotnyuk/Documents/react-burger/src/components/burger-ingredients/burger-ingredient.tsx"],"names":["React","ingredientStyles","Tab","CurrencyIcon","Counter","useDispatch","useSelector","openModal","setTab","useDrag","useLocation","Link","bun","sauce","main","Card","item","onClick","dragRef","type","location","constructor","store","burger","count","filter","ingredient","_id","length","link","pathname","state","background","card","counter","image_large","img","name","map","price","BurgerIngredients","dispatch","current","tab","items","ingredients","clickTab","e","console","log","document","getElementById","scrollIntoView","behavior","block","scrollIngredientsList","arr","pos","scrollTop","res","resdy","dy","forEach","offsetTopItem","offsetTop","Math","abs","clickItem","el"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ingredientStyles from './burger-ingredients.module.css';\nimport { Tab, CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { TIngredient } from '../../utils/types';\nimport { useDispatch, useSelector } from '../../services/hooks';\nimport { openModal, setTab } from '../../services/actions/burger';\nimport { useDrag } from \"react-dnd\";\nimport { useLocation, Link } from 'react-router-dom';\n\nconst bun = \"Булки\";\nconst sauce = \"Соусы\";\nconst main = \"Начинки\";\n\ntype TCard = {\n  item: TIngredient,\n  onClick: () => void,\n}\n\nconst Card: React.FC<TCard> = ({ item, onClick }) => {\n  const [, dragRef] = useDrag({\n    type: \"ingredients\",\n    item: item\n  });\n\n  const location = useLocation();\n  const constructor = useSelector((store) => store.burger.constructor);\n  const count = constructor?.filter((ingredient) => ingredient._id === item._id).length;\n\n  return (\n    <React.Fragment>\n      <Link\n        className={ingredientStyles.link}\n        key={item._id}\n        to={{\n          pathname: `/ingredients/${item._id}`,\n          state: { background: location },\n        }}>\n        <div className={ingredientStyles.card} onClick={onClick} ref={dragRef}>\n          {\n            count !== 0 && count &&\n            <div className={ingredientStyles.counter}>\n              <Counter count={count} size=\"default\" />\n            </div>\n          }\n          <img src={item.image_large} className={ingredientStyles.img} alt={item.name} />\n          <div className={ingredientStyles.map}>\n            <p className=\"text text_type_digits-default\"  >\n              {item.price}\n              <CurrencyIcon type=\"primary\" />\n            </p>\n          </div>\n          <p className=\"text text_type_main-default\" >{item.name}</p>\n        </div>\n      </Link>\n    </React.Fragment>\n  )\n}\n\nconst BurgerIngredients = () => {\n  const dispatch = useDispatch();\n  const current = useSelector((store) => store.burger.tab);\n  const items = useSelector((store) => store.burger.ingredients);\n\n  function clickTab(e: string) {\n    console.log(e)\n    dispatch(setTab(e));\n    document.getElementById(e + \"-list\")?.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start'\n    });\n  }\n\n  function scrollIngredientsList() {\n    const arr = [\"one\", \"two\", \"three\"];\n    let pos = document.getElementById(\"ingredients-list\")?.scrollTop || 0;\n    let res = \"\";\n    let resdy = 1000000;\n    let dy = 0;\n    arr.forEach(item => {\n      let offsetTopItem = document.getElementById(item + \"-list\")?.offsetTop || 0;\n      let offsetTop = document.getElementById(\"ingredients-list\")?.offsetTop || 0;\n      dy = Math.abs(offsetTopItem - offsetTop - pos);\n      if (dy < resdy) { res = item; resdy = dy }\n    });\n    if (res !== current)\n      dispatch(setTab(res));\n  }\n\n  const clickItem = (el: TIngredient) => {\n    dispatch(openModal(el));\n  }\n\n  return (\n    <div className={ingredientStyles.ingredient}>\n      <p className=\"text text_type_main-large mt-10 mb-5\">\n        Соберите бургер\n      </p>\n      <div className={ingredientStyles.tab}>\n        <Tab value=\"one\" active={current === 'one'} onClick={clickTab}>\n          {bun}\n        </Tab>\n        <Tab value=\"two\" active={current === 'two'} onClick={clickTab}>\n          {sauce}\n        </Tab>\n        <Tab value=\"three\" active={current === 'three'} onClick={clickTab}>\n          {main}\n        </Tab>\n      </div>\n      <div className={ingredientStyles.main} id=\"ingredients-list\" onScroll={scrollIngredientsList}>\n        <div >\n          <p className=\"text text_type_main-medium\" id=\"one-list\">\n            {bun}\n          </p>\n          <div className={ingredientStyles.map} >\n            {items?.map((item) =>\n              item.type === \"bun\" &&\n              <Card key={item._id} item={item} onClick={() => { clickItem(item) }} />)\n            }\n          </div>\n          <p className=\"text text_type_main-medium\" id=\"two-list\">\n            {sauce}\n          </p>\n          <div className={ingredientStyles.map}>\n            {items?.map((item) =>\n              item.type === \"sauce\" &&\n              <Card key={item._id} item={item} onClick={() => { clickItem(item) }} />)\n            }\n          </div>\n          <p className=\"text text_type_main-medium\" id=\"three-list\">\n            {main}\n          </p>\n          <div className={ingredientStyles.map}>\n            {items?.map((item) =>\n              item.type === \"main\" &&\n              <Card key={item._id} item={item} onClick={() => { clickItem(item) }} />)\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n\nexport default BurgerIngredients;"]},"metadata":{},"sourceType":"module"}