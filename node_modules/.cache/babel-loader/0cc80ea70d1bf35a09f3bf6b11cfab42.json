{"ast":null,"code":"import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{getIngredientsData}from'../../services/actions/burger';import{getUser}from'../../services/actions/auth';import{Switch,Route,useHistory,useLocation}from'react-router-dom';import{HomePage,LoginPage,ProfilePage,RegisterPage,ForgotPasswordPage,ResetPasswordPage,IngredientDetails}from'../../pages';import ProtectedRoute from'../../components/protected-routes';import AppHeader from'../app-header/app-header';import{Modal}from'../modal/modal';import{closeModal}from'../../services/actions/burger';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var dispatch=useDispatch();var modalItem=useSelector(function(state){return state.burger.modal;});var history=useHistory();var location=useLocation();var background=location.state&&location.state.background;useEffect(function(){dispatch(getIngredientsData());if(localStorage.refreshToken)dispatch(getUser());// @ts-ignore\nhistory.replace();},[dispatch]);var onClose=function onClose(){dispatch(closeModal);history.goBack();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AppHeader,{}),/*#__PURE__*/_jsxs(Switch// @ts-ignore\n,{location:background||location,children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,children:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/profile\",children:/*#__PURE__*/_jsx(ProfilePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",exact:true,children:/*#__PURE__*/_jsx(LoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",exact:true,children:/*#__PURE__*/_jsx(RegisterPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",exact:true,children:/*#__PURE__*/_jsx(ForgotPasswordPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reset-password\",exact:true,children:/*#__PURE__*/_jsx(ResetPasswordPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/ingredients/:id\",children:/*#__PURE__*/_jsx(IngredientDetails,{})})]}),modalItem&&background&&/*#__PURE__*/_jsx(Route,{path:\"/ingredients/:id\",exact:true,children:/*#__PURE__*/_jsxs(Modal,{isOpen:modalItem,onClose:onClose,children:[\" \",/*#__PURE__*/_jsx(IngredientDetails,{})]})})]});};export default App;","map":{"version":3,"sources":["/Users/annaplokhotnyuk/Documents/react-burger/react-burger/src/components/app/App.tsx"],"names":["useEffect","useDispatch","useSelector","getIngredientsData","getUser","Switch","Route","useHistory","useLocation","HomePage","LoginPage","ProfilePage","RegisterPage","ForgotPasswordPage","ResetPasswordPage","IngredientDetails","ProtectedRoute","AppHeader","Modal","closeModal","App","dispatch","modalItem","state","burger","modal","history","location","background","localStorage","refreshToken","replace","onClose","goBack"],"mappings":"AAAA,OAASA,SAAT,KAA8B,OAA9B,CACC,OAAyBC,WAAzB,CAAsCC,WAAtC,KAAyD,aAAzD,CACA,OAASC,kBAAT,KAAmC,+BAAnC,CACA,OAASC,OAAT,KAAwB,6BAAxB,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,UAAxB,CAAoCC,WAApC,KAAuD,kBAAvD,CACA,OAASC,QAAT,CAAmBC,SAAnB,CAA8BC,WAA9B,CAA2CC,YAA3C,CAAyDC,kBAAzD,CAA6EC,iBAA7E,CAAgGC,iBAAhG,KAAyH,aAAzH,CACA,MAAOC,CAAAA,cAAP,KAA2B,mCAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,OAASC,UAAT,KAA2B,+BAA3B,C,wFAOA,GAAMC,CAAAA,GAAM,CAAG,QAATA,CAAAA,GAAS,EAAM,CACnB,GAAMC,CAAAA,QAAQ,CAAGpB,WAAW,EAA5B,CACA,GAAIqB,CAAAA,SAAS,CAAGpB,WAAW,CAAC,SAACqB,KAAD,QAA2BA,CAAAA,KAAK,CAACC,MAAN,CAAaC,KAAxC,EAAD,CAA3B,CACA,GAAMC,CAAAA,OAAO,CAAGnB,UAAU,EAA1B,CACA,GAAMoB,CAAAA,QAAQ,CAAGnB,WAAW,EAA5B,CACA,GAAIoB,CAAAA,UAAU,CAAGD,QAAQ,CAACJ,KAAT,EAAkBI,QAAQ,CAACJ,KAAT,CAAeK,UAAlD,CAEA5B,SAAS,CACP,UAAM,CACJqB,QAAQ,CAAClB,kBAAkB,EAAnB,CAAR,CACA,GAAI0B,YAAY,CAACC,YAAjB,CACAT,QAAQ,CAACjB,OAAO,EAAR,CAAR,CACA;AACAsB,OAAO,CAACK,OAAR,GACD,CAPM,CAQP,CAACV,QAAD,CARO,CAAT,CAWA,GAAMW,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpBX,QAAQ,CAACF,UAAD,CAAR,CACAO,OAAO,CAACO,MAAR,GACD,CAHD,CAKA,mBACE,oCACE,KAAC,SAAD,IADF,cAEE,MAAC,MACD;AADA,EAEA,QAAQ,CAAEL,UAAU,EAAID,QAFxB,wBAGE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,KAAK,CAAE,IAAvB,uBACE,KAAC,QAAD,IADF,EAHF,cAME,KAAC,cAAD,EAAgB,IAAI,CAAC,UAArB,uBACE,KAAC,WAAD,IADF,EANF,cASE,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAE,IAA5B,uBACE,KAAC,SAAD,IADF,EATF,cAYE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,KAAK,CAAE,IAA/B,uBACE,KAAC,YAAD,IADF,EAZF,cAeE,KAAC,KAAD,EAAO,IAAI,CAAC,kBAAZ,CAA+B,KAAK,CAAE,IAAtC,uBACE,KAAC,kBAAD,IADF,EAfF,cAkBE,KAAC,KAAD,EAAO,IAAI,CAAC,iBAAZ,CAA8B,KAAK,CAAE,IAArC,uBACE,KAAC,iBAAD,IADF,EAlBF,cAqBE,KAAC,KAAD,EAAO,IAAI,CAAC,kBAAZ,uBACE,KAAC,iBAAD,IADF,EArBF,GAFF,CA2BGL,SAAS,EAAIM,UAAb,eACC,KAAC,KAAD,EAAO,IAAI,CAAC,kBAAZ,CAA+B,KAAK,CAAE,IAAtC,uBACE,MAAC,KAAD,EACE,MAAM,CAAEN,SADV,CAEE,OAAO,CAAEU,OAFX,4BAGE,KAAC,iBAAD,IAHF,GADF,EA5BJ,GADF,CAuCD,CA9DD,CAgEA,cAAeZ,CAAAA,GAAf","sourcesContent":["import { useEffect, FC } from 'react';\n import { RootStateOrAny, useDispatch, useSelector } from 'react-redux';\n import { getIngredientsData } from '../../services/actions/burger';\n import { getUser } from '../../services/actions/auth'\n import { Switch, Route, useHistory, useLocation } from 'react-router-dom';\n import { HomePage, LoginPage, ProfilePage, RegisterPage, ForgotPasswordPage, ResetPasswordPage, IngredientDetails } from '../../pages';\n import ProtectedRoute from '../../components/protected-routes'\n import AppHeader from '../app-header/app-header';\n import {Modal} from '../modal/modal';\n import { closeModal } from '../../services/actions/burger';\n\n type TLocation = {\n  from: Location;\n  background?: Location;\n}\n\n const App:FC = () => {\n   const dispatch = useDispatch();\n   let modalItem = useSelector((state: RootStateOrAny )=> state.burger.modal);\n   const history = useHistory();\n   const location = useLocation<TLocation>();\n   let background = location.state && location.state.background;\n\n   useEffect(\n     () => {\n       dispatch(getIngredientsData());\n       if (localStorage.refreshToken)\n       dispatch(getUser());\n       // @ts-ignore\n       history.replace()\n     },\n     [dispatch]\n   );\n\n   const onClose = () => {\n     dispatch(closeModal)\n     history.goBack()\n   }\n\n   return (\n     <div>\n       <AppHeader />\n       <Switch \n       // @ts-ignore\n       location={background || location}>\n         <Route path=\"/\" exact={true}>\n           <HomePage />\n         </Route>\n         <ProtectedRoute path=\"/profile\" >\n           <ProfilePage />\n         </ProtectedRoute>\n         <Route path=\"/login\" exact={true}>\n           <LoginPage />\n         </Route>\n         <Route path=\"/register\" exact={true}>\n           <RegisterPage />\n         </Route>\n         <Route path=\"/forgot-password\" exact={true}>\n           <ForgotPasswordPage />\n         </Route>\n         <Route path=\"/reset-password\" exact={true}>\n           <ResetPasswordPage />\n         </Route>\n         <Route path=\"/ingredients/:id\" >\n           <IngredientDetails />\n         </Route>\n       </Switch>\n       {modalItem && background &&\n         <Route path=\"/ingredients/:id\" exact={true}>\n           <Modal\n             isOpen={modalItem}\n             onClose={onClose}\n           > <IngredientDetails />\n           </Modal>\n         </Route>\n       }\n     </div>\n   );\n }\n\n export default App;"]},"metadata":{},"sourceType":"module"}